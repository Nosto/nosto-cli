"use strict";var zt=Object.defineProperty;var Zn=Object.getOwnPropertyDescriptor;var ei=Object.getOwnPropertyNames;var ti=Object.prototype.hasOwnProperty;var ri=(e,t)=>{for(var r in t)zt(e,r,{get:t[r],enumerable:!0})},oi=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ei(t))!ti.call(e,n)&&n!==r&&zt(e,n,{get:()=>t[n],enumerable:!(o=Zn(t,n))||o.enumerable});return e};var ni=e=>oi(zt({},"__esModule",{value:!0}),e);var Bs={};ri(Bs,{AbstractSlider:()=>At,AutocompleteElement:()=>pn,AutocompleteElementProvider:()=>xt,AutocompletePageProvider:()=>_e,CategoryPageProvider:()=>bt,Handle:()=>Lt,HistoryElement:()=>fn,HistoryElementProvider:()=>Pt,InfiniteScroll:()=>Fn,InfiniteScrollWithLink:()=>Fr,KeywordInCategory:()=>Ae,KeywordWrapper:()=>Ne,Keywords:()=>Pn,KeywordsInCategory:()=>Ft,Marks:()=>Ot,MultiSlider:()=>Dt,RangeSlider:()=>In,SearchPageProvider:()=>vt,SerpElement:()=>On,Steps:()=>Rt,StoreContext:()=>an,Track:()=>jt,compressFilterParameters:()=>Ve,compressSortParameters:()=>Je,configureCurrency:()=>js,createSortOption:()=>An,createStore:()=>be,currencyOptions:()=>Or,formatCurrency:()=>Us,groupBy:()=>Rr,init:()=>xn,initAutocomplete:()=>Et,mapOffsetToPage:()=>Xe,pick:()=>te,priceDecorator:()=>nn,reportClick:()=>Rn,shopifyThumbnailDecorator:()=>Ar,speechToTextSupported:()=>cr,thumbnailDecorator:()=>jn,useActions:()=>Ee,useAppState:()=>Qo,useAppStateSelector:()=>_,useConfig:()=>ae,useCurrencyFormatting:()=>sn,useDispatchEventOnLoad:()=>on,useFacet:()=>Xo,useFacets:()=>Zo,useLoadMore:()=>ht,usePagination:()=>_o,useProductFilters:()=>Vo,useRange:()=>Qe,useRangeSelector:()=>Jo,useRangeSlider:()=>Qe,useResponse:()=>en,useSelectedFiltersCount:()=>Wo,useSimplePagination:()=>tn,useSizeOptions:()=>Yo,useSort:()=>Go,useSpeechToText:()=>Ko,useStore:()=>Te,waitForElement:()=>Sn});module.exports=ni(Bs);var Dr=require("preact");function $t(){var e;window.nostojs=(e=window.nostojs)!=null?e:function(t){var r;(window.nostojs.q=(r=window.nostojs.q)!=null?r:[]).push(t)}}async function U(e){return window.nostojs(e)}var ii=null;typeof window<"u"&&($t(),U(e=>{ii=e.internal.getSettings()}));typeof window<"u"&&$t();function nt(){throw new Error("Not implemented")}var Z={categoryId:nt,categoryPath:nt,pageType:nt,variation:nt};U(e=>{Z.categoryId=()=>{var t;return(t=e.pageTagging().categoryIds)==null?void 0:t[0]},Z.categoryPath=()=>{var t;return(t=e.pageTagging().categories)==null?void 0:t[0]},Z.pageType=()=>e.pageTagging().pageType,Z.variation=()=>e.pageTagging().variation});function Ur(e){U(t=>{t.internal.setTaggingProvider("searchTerms",()=>{var n;let o=new URLSearchParams(window.location.search).get(((n=e.serpUrlMapping)==null?void 0:n.query)||"");return o?[o]:void 0},{priority:!0})})}var Bt={autocompleteMinLength:2,historyEnabled:!0,historySize:5,serpUrlMapping:{name:"name",query:"query","product.personalizationBoost":"aff",segments:"segments",customRules:"customRules",explain:"explain",time:"time",products:"products",keywords:"keywords"},defaultCurrency:"EUR",serpPathRedirect:!1,categoryId:()=>Z.categoryId(),categoryPath:()=>Z.categoryPath(),variationId:()=>Z.variation(),categoryQuery(){return{products:{categoryId:this.categoryId(),categoryPath:this.categoryPath(),size:this.serpSize,from:0}}},isCategoryPage:()=>Z.pageType()==="category",compressUrlParameters:!1,debounceDelay:300,persistentSearchCache:!1,memoryCache:!1,preservePageScroll:!1,queryModifications:e=>e,hitDecorators:[],retries:3,retryInterval:500,speechToTextEnabled:!1},se=(0,Dr.createContext)(Bt);function De(e,t){let r=e[t];return typeof r=="function"?r.bind(e)():r}var qr=require("preact/hooks");function ae(){return(0,qr.useContext)(se)}function zr(){var e;window.nostojs=(e=window.nostojs)!=null?e:function(t){var r;(window.nostojs.q=(r=window.nostojs.q)!=null?r:[]).push(t)}}async function Q(e){return window.nostojs(e)}var $r=null;typeof window<"u"&&(zr(),Q(e=>{$r=e.internal.getSettings()}));function Br(){return $r}typeof window<"u"&&zr();var Hr=e=>String(e)==="[object Object]";function ue(e){if(!Hr(e))return!1;let t=e.constructor;if(t===void 0)return!0;let r=t.prototype;return!(!Hr(r)||!r.hasOwnProperty("isPrototypeOf"))}function X(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(e)&&Array.isArray(t))return e.length!==t.length?!1:e.every((r,o)=>X(r,t[o]));if(ue(e)&&ue(t)){let r=Object.entries(e);return r.length!==Object.keys(t).length?!1:r.every(([o,n])=>X(n,t[o]))}return!1}function it(e){return(...t)=>{Q(r=>{(r.internal.context.mode.isPreview()?console[e]:r.internal.logger[e])(...t)})}}var x={debug:it("debug"),info:it("info"),warn:it("warn"),error:it("error")};function K(...e){return st(...e)}function st(...e){return e.reduce((t,r)=>Kr(t,r))}function Kr(e,t){return ue(e)&&ue(t)?Object.entries(t).reduce((r,[o,n])=>(r[o]=Kr(r[o],n),r),{...e}):ue(e)?e:t}var si=" daum[ /]| deusu/| yadirectfetcher|(?:^|[^g])news(?!sapphire)|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bots?(?:\\b|_)|(?<!(?:lib))http|(?<![hg]m)score|(?<!cam)scan|@[a-z][\\w-]+\\.|\\(\\)|\\.com\\b|\\btime/|\\||^<|^[\\w \\.\\-\\(?:\\):%]+(?:/v?\\d+(?:\\.\\d+)?(?:\\.\\d{1,10})*?)?(?:,|$)|^[^ ]{50,}$|^\\d+\\b|^\\w*search\\b|^\\w+/[\\w\\(\\)]*$|^active|^ad muncher|^amaya|^avsdevicesdk/|^biglotron|^bot|^bw/|^clamav[ /]|^client/|^cobweb/|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^email|^facebook|^getright/|^gozilla/|^hobbit|^hotzonu|^hwcdn/|^igetter/|^jeode/|^jetty/|^jigsaw|^microsoft bits|^movabletype|^mozilla/\\d\\.\\d\\s[\\w\\.-]+$|^mozilla/\\d\\.\\d\\s\\(compatible;?(?:\\s\\w+\\/\\d+\\.\\d+)?\\)$|^navermailapp|^netsurf|^offline|^openai/|^owler|^php|^postman|^python|^rank|^read|^reed|^rest|^rss|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^track|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^wordpress|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|analyzer|archive|ask jeeves/teoma|audit|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check\\b|checker|chrome-lighthouse|chromeframe|classifier|cloudflare|convertify|crawl|cypress/|dareboost|datanyze|dejaclick|detect|dmbrowser|download|evc-batch/|exaleadcloudview|feed|firephp|functionize|gomezagent|grab|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|infrawatch|insight|inspect|iplabel|ips-agent|java(?!;)|library|linkcheck|mail\\.ru/|manager|measure|neustar wpm|node|nutch|offbyone|onetrust|optimize|pageburst|pagespeed|parser|perl|phantomjs|pingdom|powermarks|preview|proxy|ptst[ /]\\d|retriever|rexx;|rigor|rss\\b|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|supercleaner|synapse|synthetic|tools|torrent|transcoder|url|validator|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|xtate/",ai=/bot|crawl|http|lighthouse|scan|search|spider/i,qe;function ui(){if(qe instanceof RegExp)return qe;try{qe=new RegExp(si,"i")}catch(e){qe=ai}return qe}function ci(e){return!!e&&ui().test(e)}function ee(){return ci(navigator.userAgent)}function Ht(...e){if(!e.every(t=>t==null))return e.filter(t=>Array.isArray(t)).reduce((t,r)=>t.concat(r),[])}var Qr="nosto.search.";function li(e){var t;let r=`${Qr}${e}`;(t=window.performance)==null||t.mark(`${r}.start`)}function mi(e){var t,r;let o=`${Qr}${e}`;(t=window.performance)==null||t.mark(`${o}.end`),(r=window.performance)==null||r.measure(o,`${o}.start`,`${o}.end`)}function N(e){return li(e),()=>mi(e)}function Kt(e){return Array.from(new Set(e))}function W(e){if(typeof e=="number")return e;if(typeof e!="string")return;let t=Number(e);return isNaN(t)?void 0:t}function te(e,...t){return t.reduce((r,o)=>(r[o]=e[o],r),{})}function _r(e){e.setAttribute("autocomplete","off")}function Vr(e,{onClick:t,onFocus:r,onInput:o,onKeyDown:n,onSubmit:a},{form:i=(u=>(u=e.form)!=null?u:void 0)(),nativeSubmit:s}={}){let c=[];function m(l,p,h){l.addEventListener(p,h),c.push(()=>l.removeEventListener(p,h))}return(n||a)&&m(e,"keydown",l=>{n==null||n(e.value,l.key),n&&(l.key==="ArrowDown"||l.key==="ArrowUp")?l.preventDefault():a&&l.key==="Enter"&&(e.value!==""&&!l.repeat&&a(e.value),s||l.preventDefault())}),a&&i&&(m(i,"submit",l=>{s||l.preventDefault(),a(e.value)}),i.querySelectorAll("[type=submit]").forEach(l=>{m(l,"click",p=>{s||p.preventDefault(),a(e.value)})})),t&&m(e,"click",()=>t(e.value)),r&&m(e,"focus",()=>r(e.value)),o&&m(e,"input",()=>o(e.value)),{destroy(){c.forEach(l=>l())}}}function ze(...e){return t=>e.reduce((r,o)=>o(r),t)}var Jr=e=>String(e)==="[object Object]";function re(e){if(!Jr(e))return!1;let t=e.constructor;if(t===void 0)return!0;let r=t.prototype;return!(!Jr(r)||!r.hasOwnProperty("isPrototypeOf"))}function at(e){return Array.isArray(e)?e:[e]}var Xr={filterRangeSeparator:"~"};function ut(e){return typeof e.compressUrlParameters!="object"?Xr:{...Xr,...e.compressUrlParameters}}function Gr(e,t){return Object.entries(t).sort((r,o)=>o[0].split(".").length-r[0].split(".").length).reduce(([r,o],[n,a])=>{let i=vi(o,n);return i!=null?[bi(r,a,i),Si(o,n)]:[r,o]},[{},e])[0]}function Yr(e,t){return Object.keys(t||{}).length>0?Gr(e,Object.entries(t).reduce((r,[o,n])=>Object.assign(Object.assign({},r),{[n]:o}),{})):e}function _t(e){let t=new URLSearchParams;return Object.entries(e).forEach(([r,o])=>{at(o).filter(n=>n!=null).forEach(n=>{t.append(r,String(n))})}),t.toString()}function Zr(e){let t=new URLSearchParams(e),r={};return t.forEach((o,n)=>{r[n]||(r[n]=[]),r[n].push(o)}),r}function eo(e){let t=Object.entries(e).map(([r,o])=>({key:r,values:at(o)})).sort((r,o)=>r.key<o.key?-1:r.key>o.key?1:0);return no(t.map(r=>({key:hi(r.key),values:r.values})))}function pi(e,t=[]){return Object.assign({},...Object.entries(e).map(([r,o])=>Qt([r],o,t)))}function to(e,t=document.title){let r=ye(e);di(window.location.href,r)||window.history.pushState(void 0,t,r)}function ro(e){setTimeout(()=>{window.addEventListener("popstate",e)},30)}function di(e,t){return ye(e)===ye(t)}function ye(e){return new URL(e.endsWith("?")?e.slice(0,-1):e,window.location.href).href}function Pe(e,t,r){var s,u,c,m,l;let o=ut(e.config),n=ze(...(u=(s=e.config.customUrlMappings)==null?void 0:s.map(p=>h=>p.encode(h,o)))!=null?u:[]),a=io(n(t),n(e.store.getInitialState().query)),i=pi({...(c=r==null?void 0:r.customParams)!=null?c:{},...Gr(a,e.config.serpUrlMapping)},Object.values(e.config.serpUrlMapping));return`${((m=e.store.getInitialState())==null?void 0:m.pageType)==="search"&&(l=e.config.serpPath)!=null?l:location.pathname}?${_t(i)}`}var ct=".",oo="::";function fi(e){return/^\+?(0|[1-9]\d*)$/.test(e)}function no(e){if(!e.length)return{};let t=e[0];return t.key.length===0?t.values.length===1?t.values[0]:t.values:fi(t.key[0])?Object.values(Wr(e)):Wr(e)}function Wr(e){let t=e.reduce((r,o)=>{let n=o.key[0];return{...r,[n]:[...r[n]||[],o]}},{});return Object.assign({},...Object.keys(t).map(r=>({[r]:no(gi(t[r]))})))}function gi(e){return e.map(t=>({key:t.key.slice(1),values:t.values}))}function Qt(e,t,r){return re(t)?Object.assign({},...Object.entries(t).map(([o,n])=>Qt([...e,o],n,r))):t instanceof Array&&(r.includes(e[0])||t.some(o=>o instanceof Object))?Object.assign({},...t.map((o,n)=>Qt([...e,n.toString()],o,r))):{[yi(e)]:t}}function yi(e){return e.map(t=>t.split(ct).join(oo)).join(ct)}function hi(e){return e.split(ct).map(t=>t.split(oo).join(ct))}function Si(e,t){e=$e(e);let r,o,n,a,i;a=e;let s=t.split(".");for(o=r=0,n=s.length;r<n&&(i=s[o],i=decodeURIComponent(i),re(a)&&i in a);o=++r)o+1===s.length?delete a[i]:a=a[i];return e}function vi(e,t,r){let o,n,a,i,s,u;i=e;let c=t.split(".");for(u=void 0,n=o=0,a=c.length;o<a;n=++o)if(s=c[n],s=decodeURIComponent(s),re(i)&&s in i)i=i[s],u=i;else{u=r;break}return u}function $e(e){return e instanceof Array?e.map(t=>$e(t)):re(e)?Object.entries(e).reduce((t,[r,o])=>Object.assign(Object.assign({},t),{[$e(r)]:$e(o)}),{}):e}function bi(e,t,r){e=$e(e);let o,n,a,i,s;i=e;let u=t.split(".");for(n=o=0,a=u.length;o<a;n=++o)s=u[n],s=decodeURIComponent(s),n+1!==u.length?(s in i||(i[s]={}),re(i[s])||(i[s]={}),i=i[s]):i[s]=r;return e}function Ci(e,t){return JSON.stringify(e)===JSON.stringify(t)}function io(e,t){if(re(e)&&re(t)){let r={};return Object.keys(e).forEach(o=>{Ci(e[o],t[o])||(r[o]=io(e[o],t[o]))}),r}return e}function so(e,t,r){let o=JSON.stringify(t);try{r.setItem(e,o)}catch(n){x.warn(n)}}function ao(e,t){let r;try{r=t.getItem(e)}catch(o){x.warn(o);return}if(r)try{return JSON.parse(r)}catch(o){x.warn(`cannot parse JSON- ${o} (${r})`);return}}function uo(e,t){so(e,t,localStorage)}function co(e,t){so(e,t,sessionStorage)}function Vt(e){return ao(e,localStorage)}function lo(e){return ao(e,sessionStorage)}var wi=600,mo="nosto:search-templates:error";function po(){let e=fo(),t=go();return!e||t>e?(co(mo,t+wi),!0):!1}function fo(){let e=lo(mo);return e?+e:void 0}function go(){return Math.floor(new Date().getTime()/1e3)}function ce(){let e=fo();return e&&go()<e}async function yo(){return new Promise(e=>{document.readyState!=="loading"?e():window.addEventListener("DOMContentLoaded",()=>{e()})})}function he(e,t){return(typeof e=="string"?Array.from(document.querySelectorAll(e)):[e]).filter(o=>t?o instanceof t:!0)}function ho(e,t){let r=[];return he(e).forEach(o=>{let n=o.parentNode;n!==document&&n instanceof Element&&(r.push(n),r=r.concat(ho(n)))}),r.filter(o=>t===void 0||xi(o,t))}function xi(e,t){let r=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;return he(e).some(o=>r.call(o,t))}function Xt([e,t],r){let o=n=>{let a=n.target;a instanceof HTMLElement&&e&&a!==e&&a!==t&&!ho(a).includes(e)&&r()};return document.addEventListener("click",o),{destroy:()=>{document.removeEventListener("click",o)}}}function Wt(e){if(!e)return;let t=document.querySelector(e);t&&t.classList.remove("ns-content-hidden")}function So(e,t){return e.cloneNode(t)}var Jt="nosto:search-templates:scrollPos";function Gt(){window.sessionStorage.setItem(Jt,window.scrollY.toString())}function vo(){let e=window.sessionStorage.getItem(Jt);if(!e)return;let t=Math.floor(parseFloat(e)),r=window.setInterval(()=>{document.documentElement.scrollHeight-window.innerHeight>=t&&(window.scrollTo(0,t),window.sessionStorage.removeItem(Jt),window.clearInterval(r))},10);window.setTimeout(()=>{window.clearInterval(r),console.warn("Scroll position couldn't be restored in 5 seconds, something may be wrong.")},5e3)}var bo="nosto-serp-content",Co="nosto-serp-content-native",Yt="nosto-search-form",lt="nosto-search-form-native";function wo(e){e.classList.add(bo);let t=document.createElement("div");for(t.style.display="none",t.classList.add(Co);e.firstChild;){let r=e.firstChild;e.removeChild(r),t.appendChild(r)}e.parentNode.appendChild(t)}async function xo(e,t){t&&await new Promise(r=>setTimeout(r,t)),document.querySelectorAll(e).forEach(r=>{var n;let o=So(r,!0);o.classList.add(Yt),(n=r.parentNode)==null||n.insertBefore(o,r),r.id="",r.className="",r.style.display="none",r.classList.add(lt)})}function Po(){let e=document.querySelector(`.${bo}`),t=document.querySelector(`.${Co}`);if(!(!e||!t)){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;){let r=t.firstChild;t.removeChild(r),e.appendChild(r)}t.remove()}}function ko(){let e=document.querySelectorAll(`.${Yt}`),t=document.querySelectorAll(`.${lt}`);e.forEach((r,o)=>{let n=t[o];n&&(n.style.display=r.style.display,n.id=r.id,r.classList.remove(Yt),n.className=r.className,r.remove())})}var Zt=require("preact");var To=require("preact/hooks");function mt(e,t={}){let r=new Map,o=st(e,t!=null?t:{}),n=st(e,t);function a(l){o=l(o);for(let p of r.values())p(o)}function i(l){a(p=>({...p,...l}))}function s(){return o}function u(){return structuredClone(n)}function c(l,p){let h;r.set(p,S=>{let d=l(S);X(d,h)||(h=d,p(d))})}function m(l){r.delete(l)}return{updateState:i,getState:s,getInitialState:u,onChange:c,clearOnChange:m}}var pt={loading:!0,query:{},response:{},initialized:!1};function le(e={}){return mt(pt,e)}var $=(0,Zt.createContext)(le()),Se=(0,Zt.createContext)(null),er=()=>{let e=(0,To.useContext)(Se);if(!e)throw new Error("useConfig must be used within a ConfigProvider");return e};var D=require("preact/hooks");async function Pi(e,{hitDecorators:t,...r},o){var n,a;let i=await o(e,r);if(!((a=(n=i.products)==null?void 0:n.hits)!=null&&a.length)||!(t!=null&&t.length))return i;let s=u=>t.reduce((c,m)=>m(c),u);return{...i,products:{...i.products,hits:i.products.hits.map(s)}}}function ki(e,t,r){let o=JSON.stringify(t);try{r.setItem(e,o)}catch(n){x.warn(n)}}function Ti(e,t){try{let r=t.getItem(e);if(r)return JSON.parse(r)}catch(r){x.warn(r)}}function Ei(e,t){ki(e,t,sessionStorage)}function Mi(e){return Ti(e,sessionStorage)}var Mo="nosto:search-js:cache",Ii=60*1e3;function Fi(e,t){Ei(Mo,{query:e,result:t,created:Date.now()})}function Oi(e){let t=Mi(Mo);if(!t||!Ri(t))return null;let r=Eo(t.query);return!X(Eo(e),r)||Date.now()-t.created>Ii?null:t.result}function Eo(e){let t={...e,time:void 0,products:{...e.products,size:void 0}};return JSON.parse(JSON.stringify(t))}function Ri(e){return typeof e=="object"&&e!==null&&"query"in e&&"result"in e&&"created"in e}async function Ai(e,{usePersistentCache:t,...r},o){if(!t)return o(e,r);let n=await Ni(e,r,o);return Fi(e,n),n}async function Ni(e,t,r){var P,k;var o,n,a,i,s,u;let{from:c=0,size:m=0}=e.products||{},l=Oi(e);if(!l)return await r(e,t);let p=(P=(o=l==null?void 0:l.products)==null?void 0:o.size)!=null?P:0,h=(k=(n=l==null?void 0:l.products)==null?void 0:n.hits)!=null?k:[];if(m===p)return l;if(m<p)return{...l,products:{...l.products,size:m,hits:h.slice(0,m),total:((a=l.products)==null?void 0:a.total)||0}};let S=m-h.length,d=c>0?c+1:m-S,f={...e,products:{...e.products,from:d,size:S}},C=await r(f,t);return{...l,products:{...l.products,size:m,hits:[...((i=l.products)==null?void 0:i.hits)||[],...((s=C.products)==null?void 0:s.hits)||[]],total:((u=C.products)==null?void 0:u.total)||0}}}var Li=3e4,tr=new Map;function ji(e,t){let r=tr.get(e);if(!r)return;let o=Date.now()-r.created>Li,n=X(t,r.query);if(o||!n){tr.delete(e);return}return r.result}function Ui(e,t,r){tr.set(e,{query:t,result:r,created:Date.now()})}async function Di(e,t,r){if(!t.useMemoryCache)return r(e,t);let o=JSON.stringify(e),n=ji(o,e);if(n)return n;let a=await r(e,t);return Ui(o,e,a),a}function qi(e){return new Promise(t=>setTimeout(t,e))}async function zi(e,{maxRetries:t=0,retryInterval:r=0,...o},n){let a=0;for(;;)try{return await n(e,o)}catch(i){if(a>=t)throw i;if(!$i(i))throw x.info("Skipping retry logic for",i),i;a++,await qi(r)}}function $i(e){return!e||typeof e!="object"?!1:!("status"in e)||Bi(e.status)}function Bi(e){return typeof e=="number"&&(e<400||e>=500)}async function Io(e,t={}){let r=await new Promise(Q);return Hi(r.search,zi,Di,Ai,Pi)(e,t)}function Hi(e,...t){return t.reduce((r,o)=>(n,a)=>o(n,a,r),e)}function Ki(e,t){var r,o;return{...t,products:{facets:e==="autocomplete"?void 0:["*"],fields:Qi,...t.products},...t.keywords?{keywords:{...t.keywords,fields:Kt([..._i,...(r=t.keywords.fields)!=null?r:[]]),highlight:(o=t.keywords.highlight)!=null?o:{preTag:"<strong>",postTag:"</strong>"}}}:{}}}var Qi=["productId","url","name","imageUrl","imageHash","thumbUrl","description","brand","variantId","availability","price","priceText","categoryIds","categories","customFields.key","customFields.value","priceCurrencyCode","datePublished","listPrice","unitPricingBaseMeasure","unitPricingUnit","unitPricingMeasure","googleCategory","gtin","ageGroup","gender","condition","alternateImageUrls","ratingValue","reviewCount","inventoryLevel","skus.id","skus.name","skus.price","skus.listPrice","skus.priceText","skus.url","skus.imageUrl","skus.inventoryLevel","skus.customFields.key","skus.customFields.value","skus.availability","pid","onDiscount","extra.key","extra.value","saleable","available","tags1","tags2","tags3"],_i=["keyword","_redirect"];async function Be(e,t,r){var o,n,a,i,s,u,c;let m=N("newSearch"),l=e.config.pageType,p=l==="search"?"serp":l,h=K(e.store.getInitialState().query,t),S=K(e.config.search,r,{track:p,redirect:l!=="autocomplete",isKeyword:!!(r!=null&&r.isKeyword),usePersistentCache:e.config.pageType!=="autocomplete"&&e.config.persistentSearchCache,useMemoryCache:e.config.pageType==="autocomplete"&&e.config.memoryCache});(n=(o=e.config).onBeforeSearch)==null||n.call(o,e,S),e.store.updateState({query:h,loading:!0,initialized:!0});let d=e.config.queryModifications({...h,products:{...h.products,filter:Ht((i=(a=e.store.getInitialState().query)==null?void 0:a.products)==null?void 0:i.filter,(s=t.products)==null?void 0:s.filter)}},l);try{let f=await Io(Ki(e.config.pageType,d),S);e.store.updateState({response:f,loading:!1})}catch(f){x.error("Search action failed",f),(c=(u=e.config).onSearchError)==null||c.call(u,f,d,S,l)}m()}async function ke(e,t,r){let o=N("updateSearch"),n=K(e.store.getState().query,{products:{from:0}},t);await Be(e,n,r),o()}function L(e=Vi){let t=(0,D.useContext)($),[r,o]=(0,D.useState)(e(t.getState()));return t.onChange(e,o),(0,D.useEffect)(()=>()=>t.clearOnChange(o),[t]),r}var Vi=e=>e;async function Ji(e,t,r){var s;var o;let n=N("replaceFilter"),a=(o=e.store.getState().query.products)==null?void 0:o.filter,i=r!==void 0?[{field:t,[typeof r=="object"?"range":"value"]:[r]}]:[];await ke(e,{products:{filter:[...(s=a==null?void 0:a.filter(u=>u.field!==t))!=null?s:[],...i]}}),n()}async function Xi(e,t,r,o){var m;var n,a;let i=N("toggleProductFilter"),s=(n=e.store.getState().query.products)==null?void 0:n.filter,u=s==null?void 0:s.find(l=>l.value instanceof Array&&l.field===t),c=u!=null&&u.value?{...u,value:[...u.value.filter(l=>!X(l,r)),...o?[r]:[]]}:o?{field:t,value:[r]}:void 0;await ke(e,{products:{filter:[...(m=s==null?void 0:s.filter(l=>l!==u))!=null?m:[],...(a=c==null?void 0:c.value)!=null&&a.length?[c]:[]]}}),i()}function G(){let e=er(),t=(0,D.useContext)($),r=(0,D.useMemo)(()=>({config:e,store:t}),[e,t]),o=(0,D.useCallback)((s,u)=>Be(r,s,u),[r]),n=(0,D.useCallback)((s,u)=>ke(r,s,u),[r]),a=(0,D.useCallback)((s,u,c)=>Xi(r,s,u,c),[r]),i=(0,D.useCallback)((s,u)=>Ji(r,s,u),[r]);return{newSearch:o,updateSearch:n,toggleProductFilter:a,replaceFilter:i}}function dt({from:e,size:t,pageSize:r}){return ee()?{products:{from:e+r}}:{products:{size:t+r}}}function ve(e=24){let{from:t,size:r}=L(n=>{var s,u;var a,i;return{from:(s=(a=n.query.products)==null?void 0:a.from)!=null?s:0,size:(u=(i=n.query.products)==null?void 0:i.size)!=null?u:0}}),{updateSearch:o}=G();return{loadMore:(0,D.useCallback)(async()=>{await o(dt({from:t,size:r,pageSize:e}))},[t,r,e,o])}}var rr=require("preact"),Wi=0;function R(e,t,r,o,n,a){t||(t={});var i,s,u=t;if("ref"in u)for(s in u={},t)s=="ref"?i=t[s]:u[s]=t[s];var c={type:e,props:u,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Wi,__i:-1,__u:0,__source:n,__self:a};if(typeof e=="function"&&(i=e.defaultProps))for(s in i)u[s]===void 0&&(u[s]=i[s]);return rr.options.vnode&&rr.options.vnode(c),c}var ft=require("preact/hooks"),Fo=require("preact");function or(e,t){var u,c,m;var r,o,n;let a=(u=(r=t.products)==null?void 0:r.total)!=null?u:0,i=(c=(o=e.products)==null?void 0:o.from)!=null?c:0,s=(m=(n=e.products)==null?void 0:n.size)!=null?m:0;return a>0&&a>i+s}function He(){return!!(window.IntersectionObserver&&window.IntersectionObserverEntry&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}function Ke({children:e,pageSize:t}){let r=(0,ft.useRef)(null),{query:o,response:n}=L(i=>te(i,"query","response")),{loadMore:a}=ve(t);return(0,ft.useEffect)(()=>{let i,s;return or(o,n)&&(i=r.current,s=new IntersectionObserver(u=>{let c=u[0];c!=null&&c.isIntersecting&&a()}),i&&s.observe(i)),()=>{i&&s.unobserve(i)}},[n]),R(Fo.Fragment,{children:[e,R("div",{ref:r,style:{height:"1px"}})]})}function Oo(e){if(e){if(e.toString().includes("Request aborted"))return!1;if(typeof e=="object"&&"status"in e&&typeof e.status=="number")return![200,400].includes(e.status)}else return!1;return!0}async function oe(e,t,r){return Be({config:{...e.config,pageType:e.store.getState().pageType},store:e.store},t,r)}async function Ro(e,t,r){let o=K({customParams:e.store.getState().customParams},r);return ke({config:{...e.config,pageType:e.store.getState().pageType},store:e.store},t,o)}function Ao(e,t,r){let o=K(e.store.getState().query,{products:{from:0}},t),n=K({customParams:e.store.getState().customParams},r);return{url:new URL(ye(Pe(e,o,n)))}}function gt(e,t){let r=N("handleFallback"),{isCategoryPage:o,categoryFallback:n,serpFallback:a}=e;if(o()&&n){n(t);return}else if(a){a(t);return}po()&&(e.fallback==="legacy"?location.reload():(Po(),ko())),r()}var No=require("preact");function Gi({pageSize:e}){let{loadMore:t}=ve(e);return R("button",{onClick:t,children:"More results"})}function nr({children:e,loadMoreComponent:t,pageSize:r}){let{loading:o,query:n,response:a}=L(s=>te(s,"loading","query","response")),i=!o&&or(n,a);return R(No.Fragment,{children:[e,i&&(t?R(t,{pageSize:r}):R(Gi,{pageSize:r}))]})}var lu=!ee()&&He()?Ke:nr;var Lo=require("preact/hooks");function Te(){return(0,Lo.useContext)($)}var M=require("preact/hooks");function jo(e,t){var c;var r;let o=(c=(r=e.data)==null?void 0:r.filter(m=>m.selected).length)!=null?c:0,{active:n}={active:o>0,...t},[a,i]=(0,M.useState)(n),{toggleProductFilter:s}=G(),u=(0,M.useCallback)(()=>{i(!a)},[a]);return{active:a,selectedFiltersCount:o,toggleActive:u,toggleProductFilter:s}}function Uo(){let{loading:e,facets:t}=L(r=>{var a;var o,n;return{loading:r.loading,facets:(a=(n=(o=r.response)==null?void 0:o.products)==null?void 0:n.facets)!=null?a:[]}});return{loading:e,facets:t}}function Yi(e,t){let r=t-e;return!isNaN(r)&&r>0?new Array(t-e).fill(void 0).map((o,n)=>n+e):[]}function Do(e){let{query:t,products:r}=L(o=>({query:o.query,products:o.response.products}));return(0,M.useMemo)(()=>{var T,z;var o,n,a;if(!r)return{totalPages:0,resultsFrom:0,resultsTo:0,pages:[]};let i=(T=(o=t.products)==null?void 0:o.from)!=null?T:0,s=(z=e==null?void 0:e.width)!=null?z:1/0,u=Math.max(Math.floor(s-1)/2,1),c=r.size>0?Math.floor(i/r.size)+1:1,m=r.size>0?Math.ceil(r.total/r.size):0,l=v=>v>=c-u&&v<=c+u,p=i+1,h=Math.min(i+r.total,r.total),S={from:i,page:c,current:!0},d=v=>({from:(v-1)*r.size,page:v,current:v===c}),f=c>1?d(c-1):void 0,C=c<m?d(c+1):void 0,P=c-u-1>1?d(1):void 0,k=c+u+1<m?d(m):void 0,I=Yi(1,m+1).filter(l).map(d);return!P&&((n=I[0])==null?void 0:n.page)===2&&I.unshift(d(1)),!k&&((a=I[I.length-1])==null?void 0:a.page)===m-1&&I.push(d(m)),{totalPages:m,resultsFrom:p,resultsTo:h,current:S,prev:f,next:C,first:P,last:k,pages:I}},[t,r,e==null?void 0:e.width])}function Zi(){let{facets:e}=L(c=>{var l;var m;return{facets:(l=(m=c.response.products)==null?void 0:m.facets)!=null?l:[]}}),{replaceFilter:t,toggleProductFilter:r}=G(),o=(0,M.useCallback)(c=>{let m=e==null?void 0:e.find(l=>l.type==="stats"&&l.field===c);if(m&&"min"in m&&"max"in m)return m},[e]),n=(0,M.useCallback)(c=>{var l;var m;return(l=(m=e==null?void 0:e.find(p=>p.field===c))==null?void 0:m.name)!=null?l:c},[e]),a=(0,M.useCallback)(c=>"field"in c&&(c.value instanceof Array||c.range instanceof Array),[]),i=(0,M.useCallback)(c=>{var m;return{...c,range:(m=c.range)==null?void 0:m.map(l=>({gt:l.gt?Number(l.gt):l.gt,gte:l.gte?Number(l.gte):l.gte,lt:l.lt?Number(l.lt):l.lt,lte:l.lte?Number(l.lte):l.lte}))}},[]),s=(0,M.useCallback)(c=>{var m;return((m=c.value)!=null?m:[]).map(l=>({value:l,field:c.field,name:n(c.field),filter:i(c),remove:()=>{r(c.field,l,!1)}}))},[i,n,r]),u=(0,M.useCallback)(c=>{var m;return((m=c.range)!=null?m:[]).map(l=>{var f,C,P,k;var p,h;let S=(C=(f=l.gte)!=null?f:l.gt)!=null?C:(p=o(c.field))==null?void 0:p.min,d=(k=(P=l.lte)!=null?P:l.lt)!=null?k:(h=o(c.field))==null?void 0:h.max;if(S!==void 0&&d!==void 0)return{value:`${S} - ${d}`,field:c.field,name:n(c.field),filter:i(c),remove:()=>{t(c.field,void 0)}}}).filter(Boolean)},[i,o,n,t]);return{selectFilters:a,toValueFilter:s,toRangeFilter:u}}function ar(){let{filter:e}=L(s=>{var c;var u;return{filter:(c=(u=s.query.products)==null?void 0:u.filter)!=null?c:[]}}),{updateSearch:t}=G(),{selectFilters:r,toValueFilter:o,toRangeFilter:n}=Zi(),a=(0,M.useMemo)(()=>e?e.filter(r).flatMap(s=>"value"in s?o(s):"range"in s?n(s):[]).filter(Boolean):[],[e,r,n,o]),i=(0,M.useCallback)(()=>{t({products:{filter:[]}})},[t]);return{filters:a,removeAll:i}}function ur(e){var S,d;var t,r,o;let{replaceFilter:n}=G(),{query:a,products:i}=L(f=>({query:f.query,products:f.response.products})),s=(t=i==null?void 0:i.facets)==null?void 0:t.find(f=>f.id===e);if(!s)return{min:0,max:0,range:[0,0],updateRange:()=>{}};let u=(o=(r=a.products)==null?void 0:r.filter)==null?void 0:o.find(f=>f.field===s.field),c=u!=null&&u.range?u.range[0]:void 0,m=typeof c=="object"&&("gte"in c||"lte"in c)?[W(c.gte),W(c.lte)]:[void 0,void 0],l="min"in s?Math.floor(s.min):0,p="max"in s?Math.ceil(s.max):0,h=([f,C])=>{let P=f!==void 0?Math.floor(f):void 0,k=C!==void 0?Math.ceil(C):void 0,I=P!==void 0,T=k!==void 0;(l===P||!I)&&(p===k||!T)?n(s.field,void 0):(l===P||!I)&&T?n(s.field,{lte:k.toString()}):(p===k||!T)&&I?n(s.field,{gte:P.toString()}):I&&T&&n(s.field,{gte:P.toString(),lte:k.toString()})};return{min:l,max:p,range:[(S=m[0])!=null?S:l,(d=m[1])!=null?d:p],updateRange:h}}function qo(e,t){let{min:r,max:o,range:n,updateRange:a}=ur(e),{filters:i}=ar(),s=(0,M.useMemo)(()=>{var l;let p=i.find(f=>{var C;return(C=f==null?void 0:f.filter)==null?void 0:C.range}),h=null;if(p){let f=(l=p.filter.range)==null?void 0:l[0];h=[W(f==null?void 0:f.gte),W(f==null?void 0:f.lte)]}let S=[],d=Math.floor(r/t)*t;for(;d<o;){let f=d+t,C=h&&h[0]===d&&h[1]===f;S.push({min:d,max:f,selected:C}),d=f}return S},[i,r,o,t]),u=l=>{a([l,n[1]])},c=l=>{a([n[0],l])},m=r!==n[0]||o!==n[1];return{min:r,max:o,range:n,updateRange:a,ranges:s,handleMinChange:u,handleMaxChange:c,isSelected:m}}function zo(){let{products:e,keywords:t}=L(r=>r.response);return{products:e!=null?e:{hits:[],total:0},keywords:t!=null?t:{hits:[],total:0}}}function $o(){let e=L(t=>{var r;return(r=t.query.products)==null?void 0:r.filter});return(0,M.useMemo)(()=>e?e.reduce((t,r)=>t+(Array.isArray(r.value)?r.value.length:1),0):0,[e])}function ir(e){return e&&!Number.isNaN(e)?e:0}function Bo(e,t){let{from:r,size:o,total:n}=L(u=>{var S,d,f;var c,m,l,p,h;return{from:ir((S=(c=u.query.products)==null?void 0:c.from)!=null?S:0),size:ir((d=(l=(m=u.response)==null?void 0:m.products)==null?void 0:l.size)!=null?d:0),total:ir((f=(h=(p=u.response)==null?void 0:p.products)==null?void 0:h.total)!=null?f:0)}}),{updateSearch:a}=G(),i=r+o,s=[...e].reverse().filter(u=>u+t<n);return{from:r,to:i,total:n,size:o,sizeOptions:s,handleSizeChange:u=>{a({products:{size:W(u)}})}}}function es(e,t){return e.length!==t.length?!1:e.every(r=>t.find(o=>r.field===o.field&&r.order===o.order))}function Ho(e){var a;var t,r;let o=L(i=>i.query),{updateSearch:n}=G();return{activeSort:(a=(t=e.find(i=>{var s;return es(i.value.sort,((s=o.products)==null?void 0:s.sort)||[])}))==null?void 0:t.id)!=null?a:(r=e[0])==null?void 0:r.id,setSort:i=>{let s=e.find(u=>u.id===i);s&&n({products:{sort:s.value.sort}})}}}var sr=window.SpeechRecognition||window.webkitSpeechRecognition,cr=!!(sr&&typeof sr=="function");function ts(){return{listening:!1,startListening:()=>{},stopListening:()=>{}}}function rs({language:e="en-US",interimResults:t=!1,onResult:r,onError:o}={}){let[n,a]=(0,M.useState)(!1),i=(0,M.useRef)(null),s=(0,M.useCallback)(()=>{let c=new sr;c.lang=e,c.interimResults=t,c.onstart=()=>a(!0),r&&(c.onresult=m=>{var l,p;let{transcript:h}=(p=(l=m.results)==null?void 0:l[0])==null?void 0:p[0];r(h)}),o&&(c.onerror=m=>o(m.error)),c.onend=()=>a(!1),i.current=c,c.start()},[e,t,o,r]),u=(0,M.useCallback)(()=>{var c;(c=i.current)==null||c.stop()},[i]);return{listening:n,startListening:s,stopListening:u}}var Ko=cr?rs:ts;function Ee(){let e={config:ae(),store:Te()},{toggleProductFilter:t,replaceFilter:r}=G();return{updateSearch(o,n){return Ro(e,o,n)},newSearch(o,n){return oe(e,o,n)},toggleProductFilter(o,n,a){return t(o,n,a)},replaceFilter(o,n){return r(o,n)},simulateUpdateSearch(o,n){return Ao(e,o,n)}}}var yt=require("preact/hooks");function _(e){let t=Te(),[r,o]=(0,yt.useState)(e(t.getState()));return t.onChange(e,o),(0,yt.useEffect)(()=>()=>t.clearOnChange(o),[]),r}function Qo(){return _(e=>e)}function _o(e){return Do(e)}function Vo(){return ar()}function Jo(e,t){return qo(e,t)}function Qe(e){return ur(e)}function Xo(e,t){return jo(e,t)}function Wo(){return $o()}function Go(e){return Ho(e)}function Yo(e,t){return Bo(e,t)}function Zo(){return Uo()}function en(){return zo()}function tn(){var m,l;let{query:e,response:t}=_(p=>te(p,"query","response")),{updateSearch:r}=Ee(),o=!0;if(!(t!=null&&t.products))return{hasPrev:!1,hasNext:!1,goToPrev:()=>{},goToNext:()=>{}};let n=(l=(m=e.products)==null?void 0:m.from)!=null?l:0,a=t.products.size,i=n>0,s=o||t.products.hits.length>=a;return{hasPrev:i,hasNext:s,goToPrev:()=>{if(i){let p=Math.max(0,n-a);r({products:{from:p}}),scrollTo(0,0)}},goToNext:()=>{if(s){let p=n+a;r({products:{from:p}}),scrollTo(0,0)}}}}function ht(e=24){let{from:t,size:r}=L(s=>{var u,c,m,l;return{from:(c=(u=s.query.products)==null?void 0:u.from)!=null?c:0,size:(l=(m=s.query.products)==null?void 0:m.size)!=null?l:0}}),{simulateUpdateSearch:o}=Ee(),{loadMore:n}=ve(e),a=o(dt({from:t,size:r,pageSize:e})).url.toString();function i(s){s==null||s.preventDefault(),n()}return{loadMore:i,href:a}}var rn=require("preact/hooks");function on(e,t={},r=window){let o=_(n=>n.response.products);(0,rn.useEffect)(()=>{let n=new CustomEvent(e,{detail:t});r.dispatchEvent(n)},[o])}var St=require("preact/hooks");var os={defaultCurrency:"EUR",defaultLocale:"en-US",currencySettings:{}},ns={EUR:"de-DE",GBP:"en-GB",USD:"en-US",AUD:"en-AU",CAD:"en-CA",INR:"en-IN",AFN:"en-IN",BDT:"en-IN",BTN:"en-IN",MMK:"en-IN",NPR:"en-IN",PKR:"en-IN"};function lr(e={}){let t={...os,...e};e.currencySettings||Q(o=>{var n;t.currencySettings=(n=o.internal.getSettings().currencySettings)!=null?n:{}});function r(o,n){var m;let{defaultCurrency:a,currencySettings:i,defaultLocale:s}=t,u=n!=null?n:a,c=(m=ns[u])!=null?m:s;if(u in i){let l=i[u],p=new Intl.NumberFormat(c,{useGrouping:!!l.groupingSeparator,minimumFractionDigits:l.decimalPlaces,maximumFractionDigits:l.decimalPlaces}).formatToParts(o).map(h=>h.type==="group"?l.groupingSeparator:h.type==="decimal"?l.decimalCharacter:h.value).join("");return l!=null&&l.currencyBeforeAmount?`${l.currencyToken}${p}`:`${p}${l==null?void 0:l.currencyToken}`}return new Intl.NumberFormat(c,{style:"currency",currency:u}).format(o)}return{formatCurrency:r}}function nn(e){let{formatCurrency:t}=lr(e);function r(n,a){let i={};return n.price!==void 0&&(i.priceText=t(n.price,a)),n.listPrice!==void 0&&(i.listPriceText=t(n.listPrice,a)),Object.assign({},n,i)}function o(n){return n.price!==void 0||n.listPrice!==void 0}return function(n){if(!o(n))return n;let a=r(n,n.priceCurrencyCode);return a.skus&&a.skus.some(o)&&(a.skus=a.skus.map(i=>o(i)?r(i,n.priceCurrencyCode):i)),a}}function sn(){let{defaultCurrency:e}=ae(),t=(0,St.useMemo)(lr,[]);return{format:(0,St.useCallback)((o,n)=>t.formatCurrency(o,n!=null?n:e),[t,e])}}var is={...pt,pageType:void 0,customParams:{}};function be(e){return{...mt(is,e),getInitialState:()=>e}}var an=$;var us=require("preact/hooks");var ss=require("preact/hooks");var un=require("preact/hooks");function Me(){(0,un.useEffect)(()=>{let e=window.setTimeout(()=>{x.error("Nosto client script has not loaded after 3 seconds.")},3e3);Q(()=>{window.clearTimeout(e)})},[])}var Ie={defaultCurrency:"EUR",queryModifications:e=>e};var cs={...Ie,persistentSearchCache:!1,preservePageScroll:!1};function ls(e={}){return{pageType:"search",...cs,...e}}function vt({config:e,store:t,children:r}){let o=t!=null?t:le();return Me(),R(Se,{value:ls(e),children:R($,{value:o,children:r})})}var ms={...Ie,persistentSearchCache:!1,preservePageScroll:!1};function ps(e){return{pageType:"category",...ms,...e}}function bt({config:e,store:t,children:r}){let o=t!=null?t:le();return Me(),R(Se,{value:ps(e),children:R($,{value:o,children:r})})}var ds=require("preact/hooks");var fs={...Ie,memoryCache:!1};function gs(e){return{pageType:"autocomplete",...fs,...e}}function _e({config:e,store:t,children:r}){let o=t!=null?t:le();return Me(),R(Se,{value:gs(e),children:R($,{value:o,children:r})})}var j=require("preact");function Ct(e){if(e)return typeof e=="string"?{selector:e,position:"last"}:{position:"last",...e}}function cn(e,t,r){let o=Ct(e.dropdownCssSelector),n=o&&document.querySelector(o.selector),a=n?n.querySelector("form"):t.form;return Vr(t,r,{form:a})}var wt=require("preact"),mn=require("preact/hooks");var mr="search-templates-ga-event";function ys(e){return"gtag"in e&&typeof e.gtag=="function"}function hs(e){return"ga"in e&&typeof e.ga=="function"&&"getAll"in e.ga&&typeof e.ga.getAll=="function"}function Ss(e){return"google_tag_manager"in e&&typeof e.google_tag_manager=="object"}function Fe(e){var n;let{delay:t=!1,title:r=document.title,location:o=window.location.href}=e||{};if(t)vs(r,o);else{if(ys(window)){let a=Object.keys(Ss(window)?window.google_tag_manager:{}).filter(i=>i.substring(0,2)=="G-");if(a.length>1)for(let i=0;i<a.length;i++)window.gtag("event","page_view",{page_title:r,page_location:o,send_to:a[i]});else window.gtag("event","page_view",{page_title:r,page_location:o})}if(hs(window))try{let a=new URL(o),i=window.ga.getAll();(i==null?void 0:i.length)>0&&((n=i[0])==null||n.send("pageview",a.pathname+a.search))}catch(a){x.warn("Could not send pageview to GA",a)}}}function vs(e,t){localStorage.setItem(mr,JSON.stringify({title:e,location:t}))}function bs(){let e=localStorage.getItem(mr);if(typeof e=="string"){localStorage.removeItem(mr);try{let t=JSON.parse(e);Fe(t)}catch(t){x.warn(t)}}}setTimeout(bs,1e3);var ln=require("preact"),Oe=(0,ln.createContext)(()=>{});function xt(e){return(0,wt.h)(Oe.Provider,{value:e.onSubmit},e.children)}function pn(e){var f,C,P,k,I;let{as:t,filter:r,children:o,activeClass:n,url:a,hit:i,onClick:s,...u}=e,c=_(T=>T.query.query),{serpUrlMapping:m,serpPath:l}=ae(),p=(0,mn.useContext)(Oe),h={isKeyword:!0},S=T=>{try{return new URL(`${l||location.pathname}?${_t({[m.query||"query"]:T})}`,window.location.origin).toString()}catch(z){x.warn("Could not create track url",z);return}};function d(){var T,z,v,J,O;if(e.hit){if(U(ne=>ne.recordSearchClick("autocomplete",e.hit)),(T=e.hit)!=null&&T.keyword){if((z=e.hit)!=null&&z._redirect){Fe({delay:!0,location:S(e.hit.keyword)}),location.href=e.hit._redirect;return}return p({query:(v=e.hit)==null?void 0:v.keyword,...e.filter?{products:{filter:[e.filter]}}:{}},h)}Fe({delay:!0,location:S(c)})}(J=e==null?void 0:e.hit)!=null&&J.url||e!=null&&e.url?location.href=e.url||((O=e==null?void 0:e.hit)==null?void 0:O.url):e.query&&p({...e.query,...e.filter?{products:{filter:[e.filter]}}:{}},h)}return t?(0,wt.h)(t,{...t==="a"&&((f=e.hit)!=null&&f.url)?{href:e.hit.url}:{},...u,onClick:T=>{var z;return e.hit&&U(v=>v.recordSearchClick("autocomplete",e.hit)),(z=e.onClick)==null?void 0:z.call(e,T)}},e.children):(0,wt.h)("div",{class:`ns-autocomplete-element ${(C=e.class)!=null?C:""}`,"data-nosto-query":((P=e==null?void 0:e.hit)==null?void 0:P.keyword)||((k=e==null?void 0:e.query)==null?void 0:k.query),"data-nosto-url":e.url||((I=e==null?void 0:e.hit)==null?void 0:I.url),onClick:()=>{d()},onKeyDown:T=>{T.key==="Enter"&&d()},tabIndex:0},e.children)}var Re=require("preact"),dn=require("preact/hooks");function Pt(e){return(0,Re.h)(Oe.Provider,{value:e.onHistorySubmit},e.children)}function fn({children:e,query:t,class:r}){let o=(0,dn.useContext)(Oe);return(0,Re.h)(Re.Fragment,null,(0,Re.h)("div",{className:`ns-autocomplete-element ${r||""}`,"data-nosto-query":t==null?void 0:t.query,onClick:()=>{t&&o(t)},onKeyDown:n=>{n.key==="Enter"&&t&&o(t)},tabIndex:0},e))}var kt=require("preact"),gn=require("preact/hooks");function me({children:e}){let[t]=(0,gn.useErrorBoundary)();return t&&x.error("Error caught in ErrorBoundary",t),(0,kt.h)(kt.Fragment,null,e)}function yn(e){let t;return r=>{t&&clearTimeout(t),t=setTimeout(r,e)}}function Tt({initialized:e,loading:t}){return{initialized:ee()?e&&!t:e}}async function Et(e,t){if(!e.inputCssSelector||ce())return;let r=N("initAutocomplete");e.formCssSelector&&await xo(e.formCssSelector,e.formUnbindDelay);let o=be({pageType:"autocomplete",query:De(e,"autocompleteQuery")}),n=yn(e.debounceDelay),a=he(e.inputCssSelector,HTMLInputElement).filter(i=>{var s;return!((s=i.form)!=null&&s.classList.contains(lt))}).map(i=>{let s=Cs(i,e),u=ws(i,e);if(e.speechToTextComponent&&e.speechToTextEnabled){let d=document.createElement("div");d.className="ns-autocomplete-voice-position",i.insertAdjacentElement("afterend",d),(0,j.render)((0,j.h)(me,null,(0,j.h)(e.speechToTextComponent,{onSubmit:f=>t.onSubmit({query:f})})),d)}let c=()=>{o.updateState({historyItems:u.get()})};i.setAttribute("data-nosto-element","search-input"),c();let m=d=>(f,C)=>{t.onSubmit(f,C),d.hide(),f.query&&(u.add(f.query),c(),i.value=f.query)},l=async d=>{var C,P;s.hide(),((P=(C=o.getState())==null?void 0:C.query)==null?void 0:P.query)!==d&&await oe({config:e,store:o},{query:d}),s.show()};_r(i);let p=cn(e,i,{onInput:d=>{d.length>=e.autocompleteMinLength?(s.show(),u.hide(),n(async()=>{try{return await oe({config:e,store:o},{query:d})}catch(f){x.error("New search failed",f);return}})):d.length===0&&e.historyEnabled?(s.hide(),u.show()):(s.hide(),u.hide())},onFocus:async d=>{if(d.length>=e.autocompleteMinLength)d||o.updateState({initialized:!0,loading:!1});else if(d.length===0&&e.historyEnabled&&!u.isOpen()){if(!e.historyComponent)return;u.show(),(0,j.render)((0,j.h)(me,null,(0,j.h)(_e,{config:e,store:o},(0,j.h)(se.Provider,{value:e},(0,j.h)(Pt,{onHistorySubmit:m(u)},(0,j.h)(e.historyComponent,null))))),u.element)}},onClick:async d=>{if(d.length>=e.autocompleteMinLength)l(d),d||o.updateState({initialized:!0,loading:!1});else if(d.length===0&&e.historyEnabled&&!u.isOpen()){if(!e.historyComponent||!e.historyEnabled)return;u.show()}},onSubmit:d=>{if(d.length>=e.autocompleteMinLength){s.hide(),u.hide(),u.add(d),c();let f=s.highlightedIndex();if(f>=0){s.submitHighlightedItem(f);return}t.onSubmit({query:d}),s.hide()}},onKeyDown:(d,f)=>{if(d.length>=e.autocompleteMinLength){if(s.isOpen()){if(f==="ArrowDown")s.goDown();else if(f==="ArrowUp")s.goUp();else if(f==="Enter"){let C=s.highlightedIndex();if(C>=0){s.submitHighlightedItem(C);return}s.hide()}}f==="Escape"?s.hide():f==="ArrowDown"&&(s.show(),u.hide())}if(d.length===0&&e.historyEnabled){if(u.isOpen()&&(f==="ArrowDown"?u.goDown():f==="ArrowUp"&&u.goUp()),f==="Escape")u.hide();else if(f==="ArrowDown")u.show();else if(f==="Enter"){let C=u.highlightedIndex();if(C>=0){u.submitHighlightedItem(C);return}u.hide()}}}});o.onChange(Tt,({initialized:d})=>{if(!d||!e.autocompleteComponent)return;let f=N("renderAutocomplete");(0,j.render)((0,j.h)(me,null,(0,j.h)(_e,{config:e,store:o},(0,j.h)(se.Provider,{value:e},(0,j.h)(xt,{onSubmit:m(s)},(0,j.h)(e.autocompleteComponent,null))))),s.element),f()});let h=Xt([s.element,i],()=>{s.hide()}),S=Xt([u.element,i],()=>{u.hide()});return{destroy(){p.destroy(),s.destroy(),u.destroy(),h.destroy(),S.destroy()}}});return r(),{destroy:()=>{a.forEach(i=>{i.destroy()})}}}function hn(e,t,r){var u;let o=document.createElement("div");o.className="nosto-autocomplete-wrapper",t.style.display="none",(u=e.parentNode)==null||u.insertBefore(o,e.nextSibling),o.appendChild(e);let n=Ct(r.dropdownCssSelector),a=n&&document.querySelector(n.selector);if(a){let c=document.createElement("form");c.className="nosto-dropdown-form",c.appendChild(t),n.position==="first"?a.prepend(c):a.appendChild(c)}else o.appendChild(t);let i=(c,m)=>{var l,p;(l=t.querySelector(".ns-autocomplete-element.ns-autocomplete-element-hovered"))==null||l.classList.remove("ns-autocomplete-element-hovered"),(p=c[m])==null||p.classList.add("ns-autocomplete-element-hovered")},s=c=>{let m=Array.from(t.getElementsByClassName("ns-autocomplete-element")),l=m.find(p=>p.classList.contains("ns-autocomplete-element-hovered")?(c&&p.classList.remove("ns-autocomplete-element-hovered"),!0):!1);return l?m.indexOf(l):-1};return{element:t,hide:()=>{t.style.display="none"},show:()=>{t.style.display=""},destroy:()=>{var c;(c=o.parentElement)==null||c.removeChild(o)},isOpen:()=>t.style.display!=="none",goDown:()=>{let c=Array.from(t.getElementsByClassName("ns-autocomplete-element")),m=s(!0);i(c,m>=0?m+1:0)},goUp:()=>{let c=Array.from(t.getElementsByClassName("ns-autocomplete-element")),m=s(!0);i(c,(m>=0?m:c.length)-1)},highlight:i,highlightedIndex:s,submitHighlightedItem:c=>{var p,h;let m=Array.from(t.querySelectorAll(".ns-autocomplete-element"));(p=m[c])==null||p.click();let l=(h=m[c])==null?void 0:h.getAttribute("data-nosto-query");l&&(e.value=l)}}}function Cs(e,t){let r=document.createElement("div");return{...hn(e,r,t),element:r}}var pr="nosto:search-templates:history";function ws(e,t){let r=document.createElement("div");return{...hn(e,r,t),element:r,add:n=>{let i=(Vt(pr)||[]).filter(s=>s!==n).slice(t.historySize?-t.historySize:0);i.push(n),uo(pr,i)},get:()=>{let n=Vt(pr)||[];return n?n.reverse().filter(i=>!!i):void 0}}}function dr({products:e,...t}){return{...t,products:{...e,...e!=null&&e.from?{from:W(e.from)}:{},...e!=null&&e.size?{size:W(e.size)}:{}}}}var V=require("preact");async function Sn({selector:e,timeout:t=500}){return(await fr({selector:e,timeout:t}))[0]}function fr({selector:e,timeout:t=500}){return new Promise((r,o)=>{let n=he(e);if(n.length>0)return r(n);let a=new MutationObserver(()=>{let s=he(e);s.length>0&&(a.disconnect(),clearTimeout(i),r(s))}),i=setTimeout(()=>{a.disconnect(),x.warn(`Timed out (${t}) while waiting for element ${e}`),r([])},t);a.observe(document.body,{childList:!0,subtree:!0})})}async function gr(e,t,{cssSelector:r,docComponent:o}){if(!r||!o)return;let n=await fr({selector:r,timeout:100}),a=n[0];if(!a){x.warn(`No content element with ${r} selector found, skipping rendering`);return}n.length>1&&x.warn(`Multiple content elements found with ${r} selector, using the first element for rendering`),e.serpRenderDelay&&await e.serpRenderDelay(),wo(a);let i=N("renderSearch"),s=t.getState().pageType,u={store:t,config:e,target:a,ComponentToRender:o};if(s==="search")xs(u);else if(s==="category")Ps(u);else throw new Error(`Unsupported page type: ${s}`);i()}function xs({store:e,config:t,target:r,ComponentToRender:o}){(0,V.render)((0,V.h)(me,null,(0,V.h)(vt,{store:e,config:t},(0,V.h)(se.Provider,{value:t},(0,V.h)(o,null)))),r)}function Ps({store:e,config:t,target:r,ComponentToRender:o}){(0,V.render)((0,V.h)(me,null,(0,V.h)(bt,{store:e,config:t},(0,V.h)(se.Provider,{value:t},(0,V.h)(o,null)))),r)}async function yr(e,t){let r=N("initSerp");Wt(e.contentCssSelector),Wt(e.categoryCssSelector),t.onChange(Tt,({initialized:o})=>{o&&(t.getState().pageType==="category"?gr(e,t,{cssSelector:e.categoryCssSelector,docComponent:e.categoryComponent}):gr(e,t,{cssSelector:e.contentCssSelector,docComponent:e.serpComponent}),e.preservePageScroll&&vo())}),t.onChange(({query:o,customParams:n})=>({query:o,customParams:n}),({query:o,customParams:n})=>{to(Pe({config:e,store:t},o,{customParams:n})),Fe()}),vn(e,t),ro(()=>{vn(e,t)}),r()}function ks(e,t){var l,p,h,S;let r=eo(Zr(location.search)),o=Object.values(e.serpUrlMapping),n=Yr(r,e.serpUrlMapping)||{};n.products&&!n.products.size&&(n.products.size=(p=(l=t.getInitialState().query)==null?void 0:l.products)==null?void 0:p.size);let a=Object.entries(r).reduce((d,f)=>(o.includes(f[0])||(d[f[0]]=f[1]),d),{}),i=ut(e),s=ze(...(S=(h=e.customUrlMappings)==null?void 0:h.map(d=>f=>d.decode(f,i)))!=null?S:[]),u=ze(s,dr)(n),c=K(t.getInitialState().query,u),m=s(a);return{query:c,customParams:m}}function vn(e,t){var i;let{query:r,customParams:o}=ks(e,t),n=(!e.serpPath||location.pathname===e.serpPath)&&!!(r!=null&&r.query),a=(i=e.isCategoryPage)==null?void 0:i.call(e);if(n&&t.getState().pageType==="search"||a&&t.getState().pageType==="category"){if(e.fallback&&ce()){gt(e,r);return}oe({config:e,store:t},r,{customParams:o});return}t.getState().initialized&&location.reload()}function hr(e){return Object.entries(e).reduce((t,[r,o])=>{let n=r.split("."),a=t;for(let s=0;s<n.length-1;s++){let u=n[s];a[u]||(a[u]={}),a=a[u]}let i=n[n.length-1];return a[i]=o,t},{})}function Mt(e,t=""){let r={};return Object.entries(e).forEach(([o,n])=>{let a=t?`${t}.${o}`:o;typeof n=="object"&&n!==null?Object.assign(r,Mt(n,a)):r[a]=n}),r}function Ce({encode:e,decode:t}){return{encode(r,o){return r.products?{...r,products:e(r.products,o)}:r},decode(r,o){return r.products?{...r,products:t(r.products,o)}:r}}}function It(e,t){return e.replace(/%7E/g,t)}function Sr(e,t){let r=new RegExp(`\\${t}`,"g");return e.replace(r,"%7E")}function Ts(e,t){let[r,o]=e.split(t),n={};return o&&(n[o.includes("]")?"lt":"lte"]=It(o.replace(/[[{\]}']/gm,""),t)),r&&(n[r.includes("[")?"gt":"gte"]=It(r.replace(/[[{\]}']/gm,""),t)),n}var bn={decode(e){return e.split("||").map(t=>It(t,"~"))},encode(e){return e.map(t=>Sr(t,"~")).join("||")}},vr={decode(e,t){return e.split(",").map(r=>Ts(r,t))},encode(e,t){return e.map(r=>{let o=r.gte||(r.gt?`[${r.gt}`:""),n=r.lte||(r.lt?`${r.lt}]`:"");return[o,n].map(a=>Sr(a,t.filterRangeSeparator)).join(t.filterRangeSeparator)}).join(",")}},br={decode(e,t,r){if(t.includes("-+")){let o=decodeURIComponent(t);return{field:e,range:vr.decode(o,"-+")}}else if(t.includes(r.filterRangeSeparator))return{field:e,range:vr.decode(t,r.filterRangeSeparator)};return{field:e,value:bn.decode(t)}},encode({field:e,range:t,value:r},o){return t?{[e]:vr.encode(t,o)}:r?{[e]:bn.encode(r)}:{}}};var Ve=Ce({encode({filter:e,...t},r){if(!e)return t;let o=e.reduce((a,i)=>({...a,...br.encode(i,r)}),{}),n=hr(o);return{...t,filter:n}},decode({filter:e,...t},r){if(!e)return t;let o=Mt(e),n=Object.entries(o).map(([a,i])=>br.decode(a,i,r));return{...t,filter:n}}});var Je=Ce({encode({sort:e,...t}){if(!e)return t;let r=e.map(({field:o,order:n})=>`${o}~${n}`).join(",");return{...t,sort:r}},decode({sort:e,...t}){if(!e)return t;if(typeof e=="object"){let o=Object.entries(e).map(([n,a])=>({field:n,order:a}));return{...t,sort:o}}let r=e.split(",").filter(Boolean).map(o=>o.split("~")).map(([o,n])=>({field:o,order:n}));return{...t,sort:r}}});var Xe=Ce({encode({from:e=0,size:t,...r}){if(!t)return r;let o=Math.floor(e/t)+1;return{...r,page:o,size:t}},decode({page:e=1,size:t,...r}){if(!t)return r;let o=(e-1)*t;return{...r,from:o,size:t}}});function Es(e,t){let r=Xe.encode(e,t),o=Je.encode(r,t);return Ve.encode(o,t)}function Ms(e,t){let r=Xe.decode(e,t),o=Je.decode(r,t);return Ve.decode(o,t)}var Cn={encode:Es,decode:Ms};function wn(e){let t=K(Bt,e);return t.compressUrlParameters&&!t.customUrlMappings&&(t.customUrlMappings=[Cn]),t.onBeforeSearch=(r,o)=>{var i;if(e.fallback&&ce())throw new Error("Search API is in error state");let n=r.store,a=o;n.updateState({customParams:(i=a.customParams)!=null?i:{}})},t.onSearchError=(r,o,n,a)=>{e.fallback&&a!=="autocomplete"&&(Oo(r)?gt(t,o):x.info("Skipping fallback logic for ",r))},t.search={hitDecorators:t.hitDecorators,maxRetries:t.retries,retryInterval:t.retryInterval},t}async function xn(e){let t=N("init"),r=wn(e),o=await new Promise(U),{searchEnabled:n,categoriesEnabled:a}=o.internal.getSettings(),i=n&&r.contentCssSelector,s=n&&r.inputCssSelector,u=a&&r.categoryCssSelector;if(i||s){Ur(r);let c=be({query:De(r,"serpQuery"),pageType:"search"});i&&yr(r,c),s&&Et(r,{onSubmit:(m,l)=>{m.query&&U(p=>p.recordSearchSubmit(m.query)),r.serpPathRedirect||r.fallback&&ce()?typeof r.serpPathRedirect=="function"?r.serpPathRedirect(m,l):location.href=ye(Pe({config:r,store:c},m)):oe({config:r,store:c},m,l)}})}if(u&&(await yo(),r.isCategoryPage())){let c=be({query:De(r,"categoryQuery"),pageType:"category"});yr(r,c)}t()}var We=require("preact");function Ae({category:e,children:t}){return(0,We.h)("span",{class:"ns-clickable"},e!=null&&e.value?(0,We.h)("span",null,t," ",(0,We.h)("span",{class:"ns-keyword-in-category"},"in ",(0,We.h)("span",null,e.value))):t)}var B=require("preact");var pe=require("preact");var Ge=require("preact");function Ne({children:e,filter:t,wrapperComponent:r}){return r?(0,Ge.h)(r,{keywordComponent:e,filter:t}):(0,Ge.h)(Ge.Fragment,null,e)}function Ft({categoryField:e,wrapperComponent:t,hit:r,keywordComponent:o,keywordInCategoryComponent:n=Ae,categorySuggestionCount:a=3}){var s,u;let i=(s=r.facets)==null?void 0:s.find(c=>"data"in c&&c.field===e);return(u=i==null?void 0:i.data)!=null&&u.length?(0,pe.h)(pe.Fragment,null,(0,pe.h)(Ne,{wrapperComponent:t},o),i.data.slice(0,a).map((c,m)=>{var l;return(0,pe.h)(Ne,{wrapperComponent:t,key:(l=c.value)!=null?l:m,filter:{value:[c.value],field:e}},(0,pe.h)(n,{category:c},o))})):(0,pe.h)(Ne,{wrapperComponent:t},o)}function Pn({hits:e,elementComponent:t,keywordComponent:r,keywordInCategoryComponent:o=Ae,categorySuggestion:n=!0,categorySuggestionCount:a=3}){var c,m,l;let[i,...s]=e!=null?e:[],u=(l=(m=(c=e==null?void 0:e.find(p=>{var h;return(h=p==null?void 0:p.facets)==null?void 0:h.find(S=>{var d;return"data"in S&&((d=S==null?void 0:S.data)==null?void 0:d.length)>0})}))==null?void 0:c.facets)==null?void 0:m.find(p=>{var h;return"data"in p&&((h=p==null?void 0:p.data)==null?void 0:h.length)>0}))==null?void 0:l.field;return u&&i&&n?(0,B.h)(B.Fragment,null,(0,B.h)(Ft,{hit:i,categoryField:u,keywordComponent:(0,B.h)(r,{hit:i}),wrapperComponent:({keywordComponent:p,filter:h})=>t?(0,B.h)(t,{keywordComponent:p,hit:i,filter:h}):(0,B.h)(r,{hit:i}),keywordInCategoryComponent:o,categorySuggestionCount:a}),s==null?void 0:s.map((p,h)=>t?(0,B.h)(t,{key:`${p.keyword}-${h}}`,keywordComponent:(0,B.h)(r,{hit:p}),hit:p}):(0,B.h)(r,{hit:p}))):e==null?void 0:e.map((p,h)=>t?(0,B.h)(t,{key:`${p.keyword}-${h}}`,keywordComponent:(0,B.h)(r,{hit:p}),hit:p}):(0,B.h)(r,{hit:p}))}var Ye=require("preact"),Le=require("preact/hooks");var Is=e=>e;function de(e,t=Is){return Object.keys(e).filter(r=>e[r]).map(t).join(" ")}function Y(...e){}function kn(e,{min:t,max:r}){return e<=t?t:e>=r?r:e}function Tn(e,{min:t,max:r}){return e<t||e>r}function Fs(e){let t=e.toString(),r=t.indexOf("."),o=0;return r!==-1&&(o=t.length-r-1),o}function Os(e,{marks:t,step:r,min:o}){let n=Object.keys(t).map(Number);if(r!=null&&r>0){let i=Math.round((e-o)/r)*r+o;n.push(i)}let a=n.map(i=>Math.abs(e-i));return n[a.indexOf(Math.min(...a))]||o}function En(e,{step:t,marks:r,min:o}){let n=Os(e,{step:t,marks:r,min:o});return t==null||t<=0?n:Number(n.toFixed(Fs(t)))}function Cr(e,t){let r=t.getBoundingClientRect();return e?r.top+r.height/2:r.left+r.width/2}function wr(e,t){return e?t.clientY:t.pageX}function xr(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function Pr(e,t){return t.some(r=>e.target===r)}function kr(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}var Tr=require("preact");function Ot({min:e,max:t,lowerBound:r,upperBound:o,marks:n,included:a,vertical:i,classesPrefix:s}){let u=Object.keys(n),l=100/(u.length-1)*.9,p=t-e,h=u.map(Number).sort((S,d)=>S-d).map(S=>{let d=!a&&S===o||a&&S<=o&&S>=r,f=de({active:d,text:!0},k=>`${s}${k}`),C=i?{marginBottom:"-50%",bottom:`${(S-e)/p*100}%`}:{width:`${l}%`,marginLeft:`${-l/2}%`,left:`${(S-e)/p*100}%`},P=n[S];return(0,Tr.h)("span",{class:f,style:C,key:String(S)},P)});return(0,Tr.h)("div",{class:`${s}marks`},h)}var Er=require("preact");function Rt({min:e,max:t,step:r,lowerBound:o,upperBound:n,marks:a,dots:i,included:s,vertical:u,classesPrefix:c}){let m=t-e,l=Rs(a,i,r,e,t).map(p=>{let h=`${Math.abs(p-e)/m*100}%`,S=u?{bottom:h}:{left:h},d=!s&&p===n||s&&p<=n&&p>=o,f=de({active:d,dot:!0},C=>`${c}${C}`);return(0,Er.h)("span",{class:f,style:S,key:String(p)})});return(0,Er.h)("div",{class:`${c}steps`},l)}function Rs(e,t,r,o,n){let a=Object.keys(e).map(Number);if(t&&r>0)for(let i=o;i<=n;i=i+r)a.indexOf(i)===-1&&a.push(i);return a}var As={LEFT:0,MODDLE:1,RIGHT:2,BACK:3,FORWARD:4};function At({min:e=0,max:t=100,step:r=1,marks:o={},dots:n=!1,included:a=!0,vertical:i=!1,disabled:s=!1,className:u="range-slider",classesPrefix:c="",children:m,tracks:l=[],handles:p=[],bounds:h=[],lowerBound:S=0,upperBound:d=0,sliderRefCallback:f,activeHandle:C=null,handlesRefs:P=[],onStart:k=Y,onEnd:I=Y,onMove:T=Y,onAfterChange:z=Y}){let v=(0,Le.useRef)(0),J=(0,Le.useRef)(null);(0,Le.useEffect)(()=>{f&&f(J.current)},[]),(0,Le.useEffect)(()=>{if(rt(),C!==null)return Ue(),xe(),()=>{rt()}});let O=de({"with-marks":!!Object.keys(o).length,vertical:i,disabled:s,[u]:!0},E=>c+E);function ne(E){if(E.button!==As.LEFT)return;let H=wr(i,E);if(Pr(E,P)&&E.target instanceof Element){let fe=Cr(i,E.target);v.current=H-fe,H=fe}else v.current=0;k(H)}function et(E){if(kr(E))return;let H=xr(i,E);if(Pr(E,P)&&E.target instanceof Element){let fe=Cr(i,E.target);v.current=H-fe,H=fe}else v.current=0;k(H)}function je(E){if(!J.current){I();return}let H=wr(i,E);T(H-v.current)}function tt(E){if(!J.current||kr(E)){I();return}let H=xr(i,E);T(H-v.current)}function ie(){I(),z(h)}function Ue(){document.addEventListener("mousemove",je),document.addEventListener("mouseup",ie)}function xe(){document.addEventListener("touchmove",tt),document.addEventListener("touchend",ie)}function rt(){document.removeEventListener("mousemove",je),document.removeEventListener("mouseup",ie),document.removeEventListener("touchmove",tt),document.removeEventListener("touchend",ie)}return(0,Ye.h)("div",{class:O,ref:J,onTouchStart:s?Y:et,onMouseDown:s?Y:ne},(0,Ye.h)("div",{class:`${c}rail`}),l,(0,Ye.h)(Rt,{vertical:i,marks:o,dots:n,step:r,included:a,lowerBound:S,upperBound:d,max:t,min:e,classesPrefix:c}),p,(0,Ye.h)(Ot,{vertical:i,marks:o,included:a,lowerBound:S,upperBound:d,max:t,min:e,classesPrefix:c}),m)}var Mr=require("preact"),Nt=require("preact/hooks");function Lt({min:e,max:t,value:r,vertical:o,disabled:n,dragging:a,index:i,offset:s,classesPrefix:u,label:c,children:m,refFn:l}){let p=(0,Nt.useRef)(null);(0,Nt.useEffect)(()=>{a&&p.current&&p.current.focus()},[a]);let h=o?{bottom:`${s}%`}:{left:`${s}%`},S=de({dragging:a,handle:!0,[`handle-${i}`]:!0},f=>`${u}${f}`);function d(f){l(f),f&&(p.current=f)}return(0,Mr.h)("div",{class:S,style:h,role:"slider",tabIndex:-1,"aria-orientation":o?"vertical":"horizontal","aria-disabled":!0,"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":r,"aria-label":c,ref:d},(0,Mr.h)("span",{class:`${u}tip`},m))}var Ut=require("preact");var Mn=require("preact");function jt({vertical:e,included:t,index:r,offset:o,length:n,classesPrefix:a}){let i={};return t||(i.visibility="hidden"),e?(i.bottom=`${o}%`,i.height=`${n}%`):(i.left=`${o}%`,i.width=`${n}%`),(0,Mn.h)("div",{class:`${a}track ${a}track-${r}`,style:i})}var q=require("preact/hooks");function Dt(e){let{count:t=1,allowCross:r=!0,pushable:o=!1,value:n=null,defaultValue:a=null,min:i=0,max:s=100,classesPrefix:u="",tipFormatter:c=String,step:m=1,marks:l={},dots:p=!1,included:h=!0,vertical:S=!1,disabled:d=!1,className:f="range-slider",onBeforeChange:C=Y,onAfterChange:P=Y,onChange:k,children:I}=e,[T,z]=(0,q.useState)(void 0),[v,J]=(0,q.useState)([]),[O,ne]=(0,q.useState)(null),[et,je]=(0,q.useState)(0),tt=(0,q.useCallback)(y=>{ie.current=y},[]),ie=(0,q.useRef)(null),Ue=(0,q.useRef)([]);(0,q.useEffect)(()=>{let y=[...Array(t+1)].map(()=>i),g=n!=null?n:a!=null?a:y;J(g.map(b=>qt(b))),je(v[0]===s?0:v.length-1)},[]);let xe=(0,q.useRef)(v),rt=(0,q.useRef)(e);(0,q.useEffect)(()=>{if(!(n||typeof i=="number"||typeof s=="number"))return;let g=(n||xe.current).map(b=>qt(b,rt.current));g.length===xe.current.length&&g.every((b,w)=>b===xe.current[w])||(J(g),xe.current.some(b=>Tn(b,{min:i,max:s}))&&k(g))},[n,i,s]);let E=v.map(y=>$n(y)),H=v.map((y,g)=>(0,Ut.h)(Lt,{vertical:S,disabled:d,dragging:O===g,min:i,max:s,value:y,index:g+1,offset:E[g],classesPrefix:u,refFn:b=>{Un(b,g)},key:`handle-${g}`,label:g?"Upper bound":"Lower bound"},c(y))),fe=v.slice(0,-1).map((y,g)=>{let b=g+1;return(0,Ut.h)(jt,{vertical:S,included:!0,index:b,offset:E[g],length:E[b]-E[g],classesPrefix:u,key:`track-${g}`})});function Un(y,g=0){y?y instanceof HTMLElement&&(Ue.current[g]=y):delete Ue.current[g]}function Dn(){let y=ie.current;if(!y)return 0;let g=y.getBoundingClientRect();return S?g.top:g.left}function Nr(y){let g=y-Dn();return qt(qn(g))}function qn(y){let g=Math.abs(Math.max(y,0)/zn());return S?(1-g)*(s-i)+i:g*(s-i)+i}function zn(){let y=ie.current;return y?S?y.clientHeight:y.clientWidth:0}function $n(y){return(y-i)/(s-i)*100}function Lr(y){!n?(J(y.bounds),y.handle&&ne(y.handle)):typeof y.handle!="undefined"&&ne(y.handle),k(y.bounds)}function Bn(y){C==null||C(v);let g=Nr(y),b=Qn(g),w=_n(g,b);ne(w),je(w);let A=v[w];if(g===A)return;let F=[...v];F[w]=g,Lr({bounds:F})}function Hn(y){if(O==null)return;let g=Nr(y),b=v[O];if(g===b)return;let w=[...v];w[O]=g;let A=O;if(o!==!1){let F=v[A];Vn(w,A,F)}else r&&(w.sort((F,ge)=>F-ge),A=w.indexOf(g));Lr({handle:A,bounds:w})}function Kn(){ne(null)}function qt(y,g={}){let b={min:i,max:s,allowCross:r,marks:l,step:m,...g};return En(Wn(kn(y,b),b),b)}function Qn(y){let g=0;for(let b=1,w=v.length-1;b<w;b++)y>v[b]&&(g=b);return Math.abs(v[g+1]-y)<Math.abs(v[g]-y)&&(g+=1),g}function _n(y,g){let b=g,w=g+1;return v[w]===v[g]&&(v[et]===v[g]?b=et:b=w,y!==v[w]&&(b=y<v[w]?g:w)),b}function Vn(y,g,b){let w=Number(o),A=y[g],F=0;if(y[g+1]-A<w&&(F=1),A-y[g-1]<w&&(F=-1),F===0)return;let ge=g+F,ot=F*(y[ge]-A);jr(y,ge,F,w-ot)||(y[g]=b)}function jr(y,g,b,w){let A=y[g],F=y[g];for(;b*(F-A)<w;){if(!Jn(y,g,b))return y[g]=A,!1;F=y[g]}return!0}function Jn(y,g,b){let w=Xn(),F=w.indexOf(y[g])+b;if(F>=w.length||F<0)return!1;let ge=g+b,ot=w[F],Gn=Number(o),Yn=b*(y[ge]-ot);return jr(y,ge,b,Gn-Yn)?(y[g]=ot,!0):!1}function Xn(){let y=T;if(!y||y.marks!==l||y.step!==m){let g={...l};if(m!=null&&m>0)for(let w=i;w<=s;w+=m)g[w]=String(w);let b=Object.keys(g).map(Number);b.sort((w,A)=>w-A),z({marks:l,step:m,points:b})}return(T==null?void 0:T.points)||[]}function Wn(y,{allowCross:g}){if(!g&&O!=null){if(O>0&&y<=v[O-1])return v[O-1];if(O<v.length-1&&y>=v[O+1])return v[O+1]}return y}return(0,Ut.h)(At,{min:i,max:s,vertical:S,disabled:d,classesPrefix:u,tracks:fe,handles:H,bounds:v,upperBound:v[v.length-1],lowerBound:v[0],handlesRefs:Ue.current,activeHandle:O,step:m,marks:l,dots:p,included:h,className:f,onBeforeChange:C,onAfterChange:P,onChange:k,onStart:Bn,onEnd:Kn,onMove:Hn,sliderRefCallback:tt,tipFormatter:c},I)}var Ze=require("preact");function In(e){let{min:t,max:r,range:o,updateRange:n}=Qe(e.id);return typeof t=="number"&&typeof r=="number"&&t!==r?(0,Ze.h)(Dt,{key:`range_slider_${t}_${r}_${o.join("_")}`,classesPrefix:e.classesPrefix||"ns-",className:e.className||"range-slider",onChange:([a,i])=>{e.onSlide&&e.onSlide([Math.floor(a||t),Math.ceil(i||r)])},onAfterChange:([a,i])=>{n([a,i])},defaultValue:[Math.floor(o[0]||t),Math.ceil(o[1]||r)],min:Math.floor(t),max:Math.ceil(r),tipFormatter:e.valueFormat}):(0,Ze.h)(Ze.Fragment,null)}var Ir=require("preact");var Fn=!ee()&&He()?Ke:Fr;function Fr({loadMoreComponent:e,...t}){return(0,Ir.h)(nr,{...t,loadMoreComponent:e||Ns})}function Ns({pageSize:e}){let{loadMore:t,href:r}=ht(e);return(0,Ir.h)("a",{class:"ns-load-more-button ns-act-btn ns-act-btn-light ns-text-align-center",onClick:t,href:r},"More results")}var we=require("preact");function On({children:e,hit:t,as:r,onClick:o,...n}){let a=_(u=>u.pageType),i=a==="category"?"category":a==="search"?"serp":void 0,s=e instanceof Array?e:[e];return r?(0,we.h)(r,{...r==="a"&&t&&typeof t=="object"&&"url"in t&&typeof t.url=="string"?{href:t.url}:{},...n,onClick:u=>(t&&i&&U(c=>c.recordSearchClick(i,t)),Gt(),o==null?void 0:o(u))},...s):(0,we.h)(we.Fragment,null,s.map((u,c)=>{if(u&&typeof u=="object"&&"props"in u){let m=l=>{var p;t&&i&&U(h=>h.recordSearchClick(i,t)),Gt(),typeof((p=u.props)==null?void 0:p.onClick)=="function"&&u.props.onClick(l)};return(0,we.cloneElement)(u,{...u.props,onClick:m,key:c})}return u}))}function Rn(e,t){U(r=>r.recordSearchClick(e,t))}function An(e,t,...r){return{id:e,value:{name:t,sort:r}}}var Ls={locale:"en-US",fractionDigits:2},Or={EUR:{locale:"de-DE",fractionDigits:2},GBP:{locale:"en-GB",fractionDigits:2},USD:{locale:"en-US",fractionDigits:2},AUD:{locale:"en-AU",fractionDigits:2},CAD:{locale:"en-CA",fractionDigits:2}};function js(e,t){Or[e]=t}function Us(e,t="EUR"){var a;let{locale:r,fractionDigits:o}=(a=Or[t])!=null?a:Ls;return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:o,maximumFractionDigits:o}).format(e)}function Rr(e,t){return e.reduce((r,o,n)=>{let a=t(o,n),i=r[a]||[];return i.push(o),r[a]=i,r},{})}function Nn({size:e,productId:t,hash:r}){let o=Br();if(!o)throw new Error("Client script settings are not yet available");return`https://${o.thumbnailHost}/${o.account}/${e}/${t}/${r}/A`}function Ds({size:e}){function t(n,a){if(a)return Nn({size:e,productId:n,hash:a})}function r(n,a){if(a)return a.map(i=>{var s;return{...i,imageUrl:(s=t(n,i.imageHash))!=null?s:i.imageUrl}})}function o(n,a,i){if(!i)return a;if(a)return i.map(s=>Nn({size:e,productId:n,hash:s}))}return function(n){var i,s;let a=n.productId;return a?{...n,imageUrl:(i=t(a,n.imageHash))!=null?i:n.imageUrl,thumbUrl:(s=t(a,n.thumbHash))!=null?s:n.thumbUrl,skus:r(a,n.skus),alternateImageUrls:o(a,n.alternateImageUrls,n.alternateImageHashes)}:n}}var qs=/cdn\.shopify\.com/,Ln={1:"170x170",2:"100x100",3:"90x70",4:"50x50",5:"30x30",6:"100x140",7:"200x200",8:"400x400",9:"750x750"};function zs(e){return e in Ln}function Ar({size:e,fallback:t=r=>r}){if(e==="orig")return t;let r=Ln[e]||e;function o(s){return s?new URL(s).hostname.match(qs):!1}function n(s){return s?o(s)?s.replace(/(\.jpg|\.png|\.jpeg|\.gif|\.webp)/,`_${r}$1`):s:""}function a(s){if(s)return s.map(u=>({...u,imageUrl:n(u.imageUrl)}))}function i(s){if(s)return s.map(u=>n(u))}return function(s){return o(s.imageUrl)?{...s,imageUrl:n(s.imageUrl),thumbUrl:n(s.thumbUrl),skus:a(s.skus),alternateImageUrls:i(s.alternateImageUrls)}:t(s)}}function $s(){var e;return(e=window.Nosto)==null?void 0:e.shopifyScript}function jn({size:e}){let t=Ds({size:e});return $s()&&zs(e)?Ar({size:e,fallback:t}):t}
//# sourceMappingURL=nosto.js.map
