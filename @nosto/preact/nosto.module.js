import{createContext as yn}from"preact";function ht(){var e;window.nostojs=(e=window.nostojs)!=null?e:function(t){var r;(window.nostojs.q=(r=window.nostojs.q)!=null?r:[]).push(t)}}async function L(e){return window.nostojs(e)}var gn=null;typeof window<"u"&&(ht(),L(e=>{gn=e.internal.getSettings()}));typeof window<"u"&&ht();function Qe(){throw new Error("Not implemented")}var W={categoryId:Qe,categoryPath:Qe,pageType:Qe,variation:Qe};L(e=>{W.categoryId=()=>{var t;return(t=e.pageTagging().categoryIds)==null?void 0:t[0]},W.categoryPath=()=>{var t;return(t=e.pageTagging().categories)==null?void 0:t[0]},W.pageType=()=>e.pageTagging().pageType,W.variation=()=>e.pageTagging().variation});function vr(e){L(t=>{t.internal.setTaggingProvider("searchTerms",()=>{var n;let o=new URLSearchParams(window.location.search).get(((n=e.serpUrlMapping)==null?void 0:n.query)||"");return o?[o]:void 0},{priority:!0})})}var St={autocompleteMinLength:2,historyEnabled:!0,historySize:5,serpUrlMapping:{name:"name",query:"query","product.personalizationBoost":"aff",segments:"segments",customRules:"customRules",explain:"explain",time:"time",products:"products",keywords:"keywords"},defaultCurrency:"EUR",serpPathRedirect:!1,categoryId:()=>W.categoryId(),categoryPath:()=>W.categoryPath(),variationId:()=>W.variation(),categoryQuery(){return{products:{categoryId:this.categoryId(),categoryPath:this.categoryPath(),size:this.serpSize,from:0}}},isCategoryPage:()=>W.pageType()==="category",compressUrlParameters:!1,debounceDelay:300,persistentSearchCache:!1,memoryCache:!1,preservePageScroll:!1,queryModifications:e=>e,hitDecorators:[],retries:3,retryInterval:500,speechToTextEnabled:!1},re=yn(St);function Me(e,t){let r=e[t];return typeof r=="function"?r.bind(e)():r}import{useContext as hn}from"preact/hooks";function pe(){return hn(re)}function br(){var e;window.nostojs=(e=window.nostojs)!=null?e:function(t){var r;(window.nostojs.q=(r=window.nostojs.q)!=null?r:[]).push(t)}}async function z(e){return window.nostojs(e)}var Cr=null;typeof window<"u"&&(br(),z(e=>{Cr=e.internal.getSettings()}));function wr(){return Cr}typeof window<"u"&&br();var xr=e=>String(e)==="[object Object]";function oe(e){if(!xr(e))return!1;let t=e.constructor;if(t===void 0)return!0;let r=t.prototype;return!(!xr(r)||!r.hasOwnProperty("isPrototypeOf"))}function Q(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(e)&&Array.isArray(t))return e.length!==t.length?!1:e.every((r,o)=>Q(r,t[o]));if(oe(e)&&oe(t)){let r=Object.entries(e);return r.length!==Object.keys(t).length?!1:r.every(([o,n])=>Q(n,t[o]))}return!1}function _e(e){return(...t)=>{z(r=>{(r.internal.context.mode.isPreview()?console[e]:r.internal.logger[e])(...t)})}}var x={debug:_e("debug"),info:_e("info"),warn:_e("warn"),error:_e("error")};function q(...e){return Ve(...e)}function Ve(...e){return e.reduce((t,r)=>Pr(t,r))}function Pr(e,t){return oe(e)&&oe(t)?Object.entries(t).reduce((r,[o,n])=>(r[o]=Pr(r[o],n),r),{...e}):oe(e)?e:t}var Sn=" daum[ /]| deusu/| yadirectfetcher|(?:^|[^g])news(?!sapphire)|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bots?(?:\\b|_)|(?<!(?:lib))http|(?<![hg]m)score|(?<!cam)scan|@[a-z][\\w-]+\\.|\\(\\)|\\.com\\b|\\btime/|\\||^<|^[\\w \\.\\-\\(?:\\):%]+(?:/v?\\d+(?:\\.\\d+)?(?:\\.\\d{1,10})*?)?(?:,|$)|^[^ ]{50,}$|^\\d+\\b|^\\w*search\\b|^\\w+/[\\w\\(\\)]*$|^active|^ad muncher|^amaya|^avsdevicesdk/|^biglotron|^bot|^bw/|^clamav[ /]|^client/|^cobweb/|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^email|^facebook|^getright/|^gozilla/|^hobbit|^hotzonu|^hwcdn/|^igetter/|^jeode/|^jetty/|^jigsaw|^microsoft bits|^movabletype|^mozilla/\\d\\.\\d\\s[\\w\\.-]+$|^mozilla/\\d\\.\\d\\s\\(compatible;?(?:\\s\\w+\\/\\d+\\.\\d+)?\\)$|^navermailapp|^netsurf|^offline|^openai/|^owler|^php|^postman|^python|^rank|^read|^reed|^rest|^rss|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^track|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^wordpress|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|analyzer|archive|ask jeeves/teoma|audit|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check\\b|checker|chrome-lighthouse|chromeframe|classifier|cloudflare|convertify|crawl|cypress/|dareboost|datanyze|dejaclick|detect|dmbrowser|download|evc-batch/|exaleadcloudview|feed|firephp|functionize|gomezagent|grab|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|infrawatch|insight|inspect|iplabel|ips-agent|java(?!;)|library|linkcheck|mail\\.ru/|manager|measure|neustar wpm|node|nutch|offbyone|onetrust|optimize|pageburst|pagespeed|parser|perl|phantomjs|pingdom|powermarks|preview|proxy|ptst[ /]\\d|retriever|rexx;|rigor|rss\\b|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|supercleaner|synapse|synthetic|tools|torrent|transcoder|url|validator|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|xtate/",vn=/bot|crawl|http|lighthouse|scan|search|spider/i,Ie;function bn(){if(Ie instanceof RegExp)return Ie;try{Ie=new RegExp(Sn,"i")}catch(e){Ie=vn}return Ie}function Cn(e){return!!e&&bn().test(e)}function G(){return Cn(navigator.userAgent)}function vt(...e){if(!e.every(t=>t==null))return e.filter(t=>Array.isArray(t)).reduce((t,r)=>t.concat(r),[])}var kr="nosto.search.";function wn(e){var t;let r=`${kr}${e}`;(t=window.performance)==null||t.mark(`${r}.start`)}function xn(e){var t,r;let o=`${kr}${e}`;(t=window.performance)==null||t.mark(`${o}.end`),(r=window.performance)==null||r.measure(o,`${o}.start`,`${o}.end`)}function A(e){return wn(e),()=>xn(e)}function bt(e){return Array.from(new Set(e))}function _(e){if(typeof e=="number")return e;if(typeof e!="string")return;let t=Number(e);return isNaN(t)?void 0:t}function ne(e,...t){return t.reduce((r,o)=>(r[o]=e[o],r),{})}function Tr(e){e.setAttribute("autocomplete","off")}function Er(e,{onClick:t,onFocus:r,onInput:o,onKeyDown:n,onSubmit:a},{form:i=(u=>(u=e.form)!=null?u:void 0)(),nativeSubmit:s}={}){let c=[];function m(l,p,h){l.addEventListener(p,h),c.push(()=>l.removeEventListener(p,h))}return(n||a)&&m(e,"keydown",l=>{n==null||n(e.value,l.key),n&&(l.key==="ArrowDown"||l.key==="ArrowUp")?l.preventDefault():a&&l.key==="Enter"&&(e.value!==""&&!l.repeat&&a(e.value),s||l.preventDefault())}),a&&i&&(m(i,"submit",l=>{s||l.preventDefault(),a(e.value)}),i.querySelectorAll("[type=submit]").forEach(l=>{m(l,"click",p=>{s||p.preventDefault(),a(e.value)})})),t&&m(e,"click",()=>t(e.value)),r&&m(e,"focus",()=>r(e.value)),o&&m(e,"input",()=>o(e.value)),{destroy(){c.forEach(l=>l())}}}function Fe(...e){return t=>e.reduce((r,o)=>o(r),t)}var Mr=e=>String(e)==="[object Object]";function Y(e){if(!Mr(e))return!1;let t=e.constructor;if(t===void 0)return!0;let r=t.prototype;return!(!Mr(r)||!r.hasOwnProperty("isPrototypeOf"))}function Je(e){return Array.isArray(e)?e:[e]}var Ir={filterRangeSeparator:"~"};function Xe(e){return typeof e.compressUrlParameters!="object"?Ir:{...Ir,...e.compressUrlParameters}}function Or(e,t){return Object.entries(t).sort((r,o)=>o[0].split(".").length-r[0].split(".").length).reduce(([r,o],[n,a])=>{let i=On(o,n);return i!=null?[Rn(r,a,i),Fn(o,n)]:[r,o]},[{},e])[0]}function Rr(e,t){return Object.keys(t||{}).length>0?Or(e,Object.entries(t).reduce((r,[o,n])=>Object.assign(Object.assign({},r),{[n]:o}),{})):e}function wt(e){let t=new URLSearchParams;return Object.entries(e).forEach(([r,o])=>{Je(o).filter(n=>n!=null).forEach(n=>{t.append(r,String(n))})}),t.toString()}function Ar(e){let t=new URLSearchParams(e),r={};return t.forEach((o,n)=>{r[n]||(r[n]=[]),r[n].push(o)}),r}function Nr(e){let t=Object.entries(e).map(([r,o])=>({key:r,values:Je(o)})).sort((r,o)=>r.key<o.key?-1:r.key>o.key?1:0);return Dr(t.map(r=>({key:In(r.key),values:r.values})))}function Pn(e,t=[]){return Object.assign({},...Object.entries(e).map(([r,o])=>Ct([r],o,t)))}function Lr(e,t=document.title){let r=de(e);kn(window.location.href,r)||window.history.pushState(void 0,t,r)}function jr(e){setTimeout(()=>{window.addEventListener("popstate",e)},30)}function kn(e,t){return de(e)===de(t)}function de(e){return new URL(e.endsWith("?")?e.slice(0,-1):e,window.location.href).href}function ve(e,t,r){var s,u,c,m,l;let o=Xe(e.config),n=Fe(...(u=(s=e.config.customUrlMappings)==null?void 0:s.map(p=>h=>p.encode(h,o)))!=null?u:[]),a=qr(n(t),n(e.store.getInitialState().query)),i=Pn({...(c=r==null?void 0:r.customParams)!=null?c:{},...Or(a,e.config.serpUrlMapping)},Object.values(e.config.serpUrlMapping));return`${((m=e.store.getInitialState())==null?void 0:m.pageType)==="search"&&(l=e.config.serpPath)!=null?l:location.pathname}?${wt(i)}`}var We=".",Ur="::";function Tn(e){return/^\+?(0|[1-9]\d*)$/.test(e)}function Dr(e){if(!e.length)return{};let t=e[0];return t.key.length===0?t.values.length===1?t.values[0]:t.values:Tn(t.key[0])?Object.values(Fr(e)):Fr(e)}function Fr(e){let t=e.reduce((r,o)=>{let n=o.key[0];return{...r,[n]:[...r[n]||[],o]}},{});return Object.assign({},...Object.keys(t).map(r=>({[r]:Dr(En(t[r]))})))}function En(e){return e.map(t=>({key:t.key.slice(1),values:t.values}))}function Ct(e,t,r){return Y(t)?Object.assign({},...Object.entries(t).map(([o,n])=>Ct([...e,o],n,r))):t instanceof Array&&(r.includes(e[0])||t.some(o=>o instanceof Object))?Object.assign({},...t.map((o,n)=>Ct([...e,n.toString()],o,r))):{[Mn(e)]:t}}function Mn(e){return e.map(t=>t.split(We).join(Ur)).join(We)}function In(e){return e.split(We).map(t=>t.split(Ur).join(We))}function Fn(e,t){e=Oe(e);let r,o,n,a,i;a=e;let s=t.split(".");for(o=r=0,n=s.length;r<n&&(i=s[o],i=decodeURIComponent(i),Y(a)&&i in a);o=++r)o+1===s.length?delete a[i]:a=a[i];return e}function On(e,t,r){let o,n,a,i,s,u;i=e;let c=t.split(".");for(u=void 0,n=o=0,a=c.length;o<a;n=++o)if(s=c[n],s=decodeURIComponent(s),Y(i)&&s in i)i=i[s],u=i;else{u=r;break}return u}function Oe(e){return e instanceof Array?e.map(t=>Oe(t)):Y(e)?Object.entries(e).reduce((t,[r,o])=>Object.assign(Object.assign({},t),{[Oe(r)]:Oe(o)}),{}):e}function Rn(e,t,r){e=Oe(e);let o,n,a,i,s;i=e;let u=t.split(".");for(n=o=0,a=u.length;o<a;n=++o)s=u[n],s=decodeURIComponent(s),n+1!==u.length?(s in i||(i[s]={}),Y(i[s])||(i[s]={}),i=i[s]):i[s]=r;return e}function An(e,t){return JSON.stringify(e)===JSON.stringify(t)}function qr(e,t){if(Y(e)&&Y(t)){let r={};return Object.keys(e).forEach(o=>{An(e[o],t[o])||(r[o]=qr(e[o],t[o]))}),r}return e}function zr(e,t,r){let o=JSON.stringify(t);try{r.setItem(e,o)}catch(n){x.warn(n)}}function $r(e,t){let r;try{r=t.getItem(e)}catch(o){x.warn(o);return}if(r)try{return JSON.parse(r)}catch(o){x.warn(`cannot parse JSON- ${o} (${r})`);return}}function Br(e,t){zr(e,t,localStorage)}function Hr(e,t){zr(e,t,sessionStorage)}function xt(e){return $r(e,localStorage)}function Kr(e){return $r(e,sessionStorage)}var Nn=600,Qr="nosto:search-templates:error";function _r(){let e=Vr(),t=Jr();return!e||t>e?(Hr(Qr,t+Nn),!0):!1}function Vr(){let e=Kr(Qr);return e?+e:void 0}function Jr(){return Math.floor(new Date().getTime()/1e3)}function ie(){let e=Vr();return e&&Jr()<e}async function Xr(){return new Promise(e=>{document.readyState!=="loading"?e():window.addEventListener("DOMContentLoaded",()=>{e()})})}function fe(e,t){return(typeof e=="string"?Array.from(document.querySelectorAll(e)):[e]).filter(o=>t?o instanceof t:!0)}function Wr(e,t){let r=[];return fe(e).forEach(o=>{let n=o.parentNode;n!==document&&n instanceof Element&&(r.push(n),r=r.concat(Wr(n)))}),r.filter(o=>t===void 0||Ln(o,t))}function Ln(e,t){let r=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;return fe(e).some(o=>r.call(o,t))}function kt([e,t],r){let o=n=>{let a=n.target;a instanceof HTMLElement&&e&&a!==e&&a!==t&&!Wr(a).includes(e)&&r()};return document.addEventListener("click",o),{destroy:()=>{document.removeEventListener("click",o)}}}function Tt(e){if(!e)return;let t=document.querySelector(e);t&&t.classList.remove("ns-content-hidden")}function Gr(e,t){return e.cloneNode(t)}var Pt="nosto:search-templates:scrollPos";function Et(){window.sessionStorage.setItem(Pt,window.scrollY.toString())}function Yr(){let e=window.sessionStorage.getItem(Pt);if(!e)return;let t=Math.floor(parseFloat(e)),r=window.setInterval(()=>{document.documentElement.scrollHeight-window.innerHeight>=t&&(window.scrollTo(0,t),window.sessionStorage.removeItem(Pt),window.clearInterval(r))},10);window.setTimeout(()=>{window.clearInterval(r),console.warn("Scroll position couldn't be restored in 5 seconds, something may be wrong.")},5e3)}var Zr="nosto-serp-content",eo="nosto-serp-content-native",Mt="nosto-search-form",Ge="nosto-search-form-native";function to(e){e.classList.add(Zr);let t=document.createElement("div");for(t.style.display="none",t.classList.add(eo);e.firstChild;){let r=e.firstChild;e.removeChild(r),t.appendChild(r)}e.parentNode.appendChild(t)}async function ro(e,t){t&&await new Promise(r=>setTimeout(r,t)),document.querySelectorAll(e).forEach(r=>{var n;let o=Gr(r,!0);o.classList.add(Mt),(n=r.parentNode)==null||n.insertBefore(o,r),r.id="",r.className="",r.style.display="none",r.classList.add(Ge)})}function oo(){let e=document.querySelector(`.${Zr}`),t=document.querySelector(`.${eo}`);if(!(!e||!t)){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;){let r=t.firstChild;t.removeChild(r),e.appendChild(r)}t.remove()}}function no(){let e=document.querySelectorAll(`.${Mt}`),t=document.querySelectorAll(`.${Ge}`);e.forEach((r,o)=>{let n=t[o];n&&(n.style.display=r.style.display,n.id=r.id,r.classList.remove(Mt),n.className=r.className,r.remove())})}import{createContext as io}from"preact";import{useContext as jn}from"preact/hooks";function Ye(e,t={}){let r=new Map,o=Ve(e,t!=null?t:{}),n=Ve(e,t);function a(l){o=l(o);for(let p of r.values())p(o)}function i(l){a(p=>({...p,...l}))}function s(){return o}function u(){return structuredClone(n)}function c(l,p){let h;r.set(p,S=>{let d=l(S);Q(d,h)||(h=d,p(d))})}function m(l){r.delete(l)}return{updateState:i,getState:s,getInitialState:u,onChange:c,clearOnChange:m}}var Ze={loading:!0,query:{},response:{},initialized:!1};function se(e={}){return Ye(Ze,e)}var U=io(se()),ge=io(null),It=()=>{let e=jn(ge);if(!e)throw new Error("useConfig must be used within a ConfigProvider");return e};import{useContext as co,useState as oi,useEffect as ni,useMemo as ii,useCallback as Re}from"preact/hooks";async function Un(e,{hitDecorators:t,...r},o){var n,a;let i=await o(e,r);if(!((a=(n=i.products)==null?void 0:n.hits)!=null&&a.length)||!(t!=null&&t.length))return i;let s=u=>t.reduce((c,m)=>m(c),u);return{...i,products:{...i.products,hits:i.products.hits.map(s)}}}function Dn(e,t,r){let o=JSON.stringify(t);try{r.setItem(e,o)}catch(n){x.warn(n)}}function qn(e,t){try{let r=t.getItem(e);if(r)return JSON.parse(r)}catch(r){x.warn(r)}}function zn(e,t){Dn(e,t,sessionStorage)}function $n(e){return qn(e,sessionStorage)}var ao="nosto:search-js:cache",Bn=60*1e3;function Hn(e,t){zn(ao,{query:e,result:t,created:Date.now()})}function Kn(e){let t=$n(ao);if(!t||!Qn(t))return null;let r=so(t.query);return!Q(so(e),r)||Date.now()-t.created>Bn?null:t.result}function so(e){let t={...e,time:void 0,products:{...e.products,size:void 0}};return JSON.parse(JSON.stringify(t))}function Qn(e){return typeof e=="object"&&e!==null&&"query"in e&&"result"in e&&"created"in e}async function _n(e,{usePersistentCache:t,...r},o){if(!t)return o(e,r);let n=await Vn(e,r,o);return Hn(e,n),n}async function Vn(e,t,r){var P,k;var o,n,a,i,s,u;let{from:c=0,size:m=0}=e.products||{},l=Kn(e);if(!l)return await r(e,t);let p=(P=(o=l==null?void 0:l.products)==null?void 0:o.size)!=null?P:0,h=(k=(n=l==null?void 0:l.products)==null?void 0:n.hits)!=null?k:[];if(m===p)return l;if(m<p)return{...l,products:{...l.products,size:m,hits:h.slice(0,m),total:((a=l.products)==null?void 0:a.total)||0}};let S=m-h.length,d=c>0?c+1:m-S,f={...e,products:{...e.products,from:d,size:S}},C=await r(f,t);return{...l,products:{...l.products,size:m,hits:[...((i=l.products)==null?void 0:i.hits)||[],...((s=C.products)==null?void 0:s.hits)||[]],total:((u=C.products)==null?void 0:u.total)||0}}}var Jn=3e4,Ft=new Map;function Xn(e,t){let r=Ft.get(e);if(!r)return;let o=Date.now()-r.created>Jn,n=Q(t,r.query);if(o||!n){Ft.delete(e);return}return r.result}function Wn(e,t,r){Ft.set(e,{query:t,result:r,created:Date.now()})}async function Gn(e,t,r){if(!t.useMemoryCache)return r(e,t);let o=JSON.stringify(e),n=Xn(o,e);if(n)return n;let a=await r(e,t);return Wn(o,e,a),a}function Yn(e){return new Promise(t=>setTimeout(t,e))}async function Zn(e,{maxRetries:t=0,retryInterval:r=0,...o},n){let a=0;for(;;)try{return await n(e,o)}catch(i){if(a>=t)throw i;if(!ei(i))throw x.info("Skipping retry logic for",i),i;a++,await Yn(r)}}function ei(e){return!e||typeof e!="object"?!1:!("status"in e)||ti(e.status)}function ti(e){return typeof e=="number"&&(e<400||e>=500)}async function uo(e,t={}){let r=await new Promise(z);return ri(r.search,Zn,Gn,_n,Un)(e,t)}function ri(e,...t){return t.reduce((r,o)=>(n,a)=>o(n,a,r),e)}function si(e,t){var r,o;return{...t,products:{facets:e==="autocomplete"?void 0:["*"],fields:ai,...t.products},...t.keywords?{keywords:{...t.keywords,fields:bt([...ui,...(r=t.keywords.fields)!=null?r:[]]),highlight:(o=t.keywords.highlight)!=null?o:{preTag:"<strong>",postTag:"</strong>"}}}:{}}}var ai=["productId","url","name","imageUrl","imageHash","thumbUrl","description","brand","variantId","availability","price","priceText","categoryIds","categories","customFields.key","customFields.value","priceCurrencyCode","datePublished","listPrice","unitPricingBaseMeasure","unitPricingUnit","unitPricingMeasure","googleCategory","gtin","ageGroup","gender","condition","alternateImageUrls","ratingValue","reviewCount","inventoryLevel","skus.id","skus.name","skus.price","skus.listPrice","skus.priceText","skus.url","skus.imageUrl","skus.inventoryLevel","skus.customFields.key","skus.customFields.value","skus.availability","pid","onDiscount","extra.key","extra.value","saleable","available","tags1","tags2","tags3"],ui=["keyword","_redirect"];async function Ae(e,t,r){var o,n,a,i,s,u,c;let m=A("newSearch"),l=e.config.pageType,p=l==="search"?"serp":l,h=q(e.store.getInitialState().query,t),S=q(e.config.search,r,{track:p,redirect:l!=="autocomplete",isKeyword:!!(r!=null&&r.isKeyword),usePersistentCache:e.config.pageType!=="autocomplete"&&e.config.persistentSearchCache,useMemoryCache:e.config.pageType==="autocomplete"&&e.config.memoryCache});(n=(o=e.config).onBeforeSearch)==null||n.call(o,e,S),e.store.updateState({query:h,loading:!0,initialized:!0});let d=e.config.queryModifications({...h,products:{...h.products,filter:vt((i=(a=e.store.getInitialState().query)==null?void 0:a.products)==null?void 0:i.filter,(s=t.products)==null?void 0:s.filter)}},l);try{let f=await uo(si(e.config.pageType,d),S);e.store.updateState({response:f,loading:!1})}catch(f){x.error("Search action failed",f),(c=(u=e.config).onSearchError)==null||c.call(u,f,d,S,l)}m()}async function be(e,t,r){let o=A("updateSearch"),n=q(e.store.getState().query,{products:{from:0}},t);await Ae(e,n,r),o()}function N(e=ci){let t=co(U),[r,o]=oi(e(t.getState()));return t.onChange(e,o),ni(()=>()=>t.clearOnChange(o),[t]),r}var ci=e=>e;async function li(e,t,r){var s;var o;let n=A("replaceFilter"),a=(o=e.store.getState().query.products)==null?void 0:o.filter,i=r!==void 0?[{field:t,[typeof r=="object"?"range":"value"]:[r]}]:[];await be(e,{products:{filter:[...(s=a==null?void 0:a.filter(u=>u.field!==t))!=null?s:[],...i]}}),n()}async function mi(e,t,r,o){var m;var n,a;let i=A("toggleProductFilter"),s=(n=e.store.getState().query.products)==null?void 0:n.filter,u=s==null?void 0:s.find(l=>l.value instanceof Array&&l.field===t),c=u!=null&&u.value?{...u,value:[...u.value.filter(l=>!Q(l,r)),...o?[r]:[]]}:o?{field:t,value:[r]}:void 0;await be(e,{products:{filter:[...(m=s==null?void 0:s.filter(l=>l!==u))!=null?m:[],...(a=c==null?void 0:c.value)!=null&&a.length?[c]:[]]}}),i()}function V(){let e=It(),t=co(U),r=ii(()=>({config:e,store:t}),[e,t]),o=Re((s,u)=>Ae(r,s,u),[r]),n=Re((s,u)=>be(r,s,u),[r]),a=Re((s,u,c)=>mi(r,s,u,c),[r]),i=Re((s,u)=>li(r,s,u),[r]);return{newSearch:o,updateSearch:n,toggleProductFilter:a,replaceFilter:i}}function et({from:e,size:t,pageSize:r}){return G()?{products:{from:e+r}}:{products:{size:t+r}}}function ye(e=24){let{from:t,size:r}=N(n=>{var s,u;var a,i;return{from:(s=(a=n.query.products)==null?void 0:a.from)!=null?s:0,size:(u=(i=n.query.products)==null?void 0:i.size)!=null?u:0}}),{updateSearch:o}=V();return{loadMore:Re(async()=>{await o(et({from:t,size:r,pageSize:e}))},[t,r,e,o])}}import{options as lo}from"preact";var pi=0;function O(e,t,r,o,n,a){t||(t={});var i,s,u=t;if("ref"in u)for(s in u={},t)s=="ref"?i=t[s]:u[s]=t[s];var c={type:e,props:u,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--pi,__i:-1,__u:0,__source:n,__self:a};if(typeof e=="function"&&(i=e.defaultProps))for(s in i)u[s]===void 0&&(u[s]=i[s]);return lo.vnode&&lo.vnode(c),c}import{useRef as di,useEffect as fi}from"preact/hooks";import{Fragment as gi}from"preact";function Ot(e,t){var u,c,m;var r,o,n;let a=(u=(r=t.products)==null?void 0:r.total)!=null?u:0,i=(c=(o=e.products)==null?void 0:o.from)!=null?c:0,s=(m=(n=e.products)==null?void 0:n.size)!=null?m:0;return a>0&&a>i+s}function Ne(){return!!(window.IntersectionObserver&&window.IntersectionObserverEntry&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)}function Le({children:e,pageSize:t}){let r=di(null),{query:o,response:n}=N(i=>ne(i,"query","response")),{loadMore:a}=ye(t);return fi(()=>{let i,s;return Ot(o,n)&&(i=r.current,s=new IntersectionObserver(u=>{let c=u[0];c!=null&&c.isIntersecting&&a()}),i&&s.observe(i)),()=>{i&&s.unobserve(i)}},[n]),O(gi,{children:[e,O("div",{ref:r,style:{height:"1px"}})]})}function mo(e){if(e){if(e.toString().includes("Request aborted"))return!1;if(typeof e=="object"&&"status"in e&&typeof e.status=="number")return![200,400].includes(e.status)}else return!1;return!0}async function Z(e,t,r){return Ae({config:{...e.config,pageType:e.store.getState().pageType},store:e.store},t,r)}async function po(e,t,r){let o=q({customParams:e.store.getState().customParams},r);return be({config:{...e.config,pageType:e.store.getState().pageType},store:e.store},t,o)}function fo(e,t,r){let o=q(e.store.getState().query,{products:{from:0}},t),n=q({customParams:e.store.getState().customParams},r);return{url:new URL(de(ve(e,o,n)))}}function tt(e,t){let r=A("handleFallback"),{isCategoryPage:o,categoryFallback:n,serpFallback:a}=e;if(o()&&n){n(t);return}else if(a){a(t);return}_r()&&(e.fallback==="legacy"?location.reload():(oo(),no())),r()}import{Fragment as yi}from"preact";function hi({pageSize:e}){let{loadMore:t}=ye(e);return O("button",{onClick:t,children:"More results"})}function Rt({children:e,loadMoreComponent:t,pageSize:r}){let{loading:o,query:n,response:a}=N(s=>ne(s,"loading","query","response")),i=!o&&Ot(n,a);return O(yi,{children:[e,i&&(t?O(t,{pageSize:r}):O(hi,{pageSize:r}))]})}var Fu=!G()&&Ne()?Le:Rt;import{useContext as Si}from"preact/hooks";function je(){return Si(U)}import{useState as go,useCallback as J,useMemo as rt,useEffect as qu,useRef as vi}from"preact/hooks";function yo(e,t){var c;var r;let o=(c=(r=e.data)==null?void 0:r.filter(m=>m.selected).length)!=null?c:0,{active:n}={active:o>0,...t},[a,i]=go(n),{toggleProductFilter:s}=V(),u=J(()=>{i(!a)},[a]);return{active:a,selectedFiltersCount:o,toggleActive:u,toggleProductFilter:s}}function ho(){let{loading:e,facets:t}=N(r=>{var a;var o,n;return{loading:r.loading,facets:(a=(n=(o=r.response)==null?void 0:o.products)==null?void 0:n.facets)!=null?a:[]}});return{loading:e,facets:t}}function bi(e,t){let r=t-e;return!isNaN(r)&&r>0?new Array(t-e).fill(void 0).map((o,n)=>n+e):[]}function So(e){let{query:t,products:r}=N(o=>({query:o.query,products:o.response.products}));return rt(()=>{var T,j;var o,n,a;if(!r)return{totalPages:0,resultsFrom:0,resultsTo:0,pages:[]};let i=(T=(o=t.products)==null?void 0:o.from)!=null?T:0,s=(j=e==null?void 0:e.width)!=null?j:1/0,u=Math.max(Math.floor(s-1)/2,1),c=r.size>0?Math.floor(i/r.size)+1:1,m=r.size>0?Math.ceil(r.total/r.size):0,l=v=>v>=c-u&&v<=c+u,p=i+1,h=Math.min(i+r.total,r.total),S={from:i,page:c,current:!0},d=v=>({from:(v-1)*r.size,page:v,current:v===c}),f=c>1?d(c-1):void 0,C=c<m?d(c+1):void 0,P=c-u-1>1?d(1):void 0,k=c+u+1<m?d(m):void 0,M=bi(1,m+1).filter(l).map(d);return!P&&((n=M[0])==null?void 0:n.page)===2&&M.unshift(d(1)),!k&&((a=M[M.length-1])==null?void 0:a.page)===m-1&&M.push(d(m)),{totalPages:m,resultsFrom:p,resultsTo:h,current:S,prev:f,next:C,first:P,last:k,pages:M}},[t,r,e==null?void 0:e.width])}function Ci(){let{facets:e}=N(c=>{var l;var m;return{facets:(l=(m=c.response.products)==null?void 0:m.facets)!=null?l:[]}}),{replaceFilter:t,toggleProductFilter:r}=V(),o=J(c=>{let m=e==null?void 0:e.find(l=>l.type==="stats"&&l.field===c);if(m&&"min"in m&&"max"in m)return m},[e]),n=J(c=>{var l;var m;return(l=(m=e==null?void 0:e.find(p=>p.field===c))==null?void 0:m.name)!=null?l:c},[e]),a=J(c=>"field"in c&&(c.value instanceof Array||c.range instanceof Array),[]),i=J(c=>{var m;return{...c,range:(m=c.range)==null?void 0:m.map(l=>({gt:l.gt?Number(l.gt):l.gt,gte:l.gte?Number(l.gte):l.gte,lt:l.lt?Number(l.lt):l.lt,lte:l.lte?Number(l.lte):l.lte}))}},[]),s=J(c=>{var m;return((m=c.value)!=null?m:[]).map(l=>({value:l,field:c.field,name:n(c.field),filter:i(c),remove:()=>{r(c.field,l,!1)}}))},[i,n,r]),u=J(c=>{var m;return((m=c.range)!=null?m:[]).map(l=>{var f,C,P,k;var p,h;let S=(C=(f=l.gte)!=null?f:l.gt)!=null?C:(p=o(c.field))==null?void 0:p.min,d=(k=(P=l.lte)!=null?P:l.lt)!=null?k:(h=o(c.field))==null?void 0:h.max;if(S!==void 0&&d!==void 0)return{value:`${S} - ${d}`,field:c.field,name:n(c.field),filter:i(c),remove:()=>{t(c.field,void 0)}}}).filter(Boolean)},[i,o,n,t]);return{selectFilters:a,toValueFilter:s,toRangeFilter:u}}function Lt(){let{filter:e}=N(s=>{var c;var u;return{filter:(c=(u=s.query.products)==null?void 0:u.filter)!=null?c:[]}}),{updateSearch:t}=V(),{selectFilters:r,toValueFilter:o,toRangeFilter:n}=Ci(),a=rt(()=>e?e.filter(r).flatMap(s=>"value"in s?o(s):"range"in s?n(s):[]).filter(Boolean):[],[e,r,n,o]),i=J(()=>{t({products:{filter:[]}})},[t]);return{filters:a,removeAll:i}}function jt(e){var S,d;var t,r,o;let{replaceFilter:n}=V(),{query:a,products:i}=N(f=>({query:f.query,products:f.response.products})),s=(t=i==null?void 0:i.facets)==null?void 0:t.find(f=>f.id===e);if(!s)return{min:0,max:0,range:[0,0],updateRange:()=>{}};let u=(o=(r=a.products)==null?void 0:r.filter)==null?void 0:o.find(f=>f.field===s.field),c=u!=null&&u.range?u.range[0]:void 0,m=typeof c=="object"&&("gte"in c||"lte"in c)?[_(c.gte),_(c.lte)]:[void 0,void 0],l="min"in s?Math.floor(s.min):0,p="max"in s?Math.ceil(s.max):0,h=([f,C])=>{let P=f!==void 0?Math.floor(f):void 0,k=C!==void 0?Math.ceil(C):void 0,M=P!==void 0,T=k!==void 0;(l===P||!M)&&(p===k||!T)?n(s.field,void 0):(l===P||!M)&&T?n(s.field,{lte:k.toString()}):(p===k||!T)&&M?n(s.field,{gte:P.toString()}):M&&T&&n(s.field,{gte:P.toString(),lte:k.toString()})};return{min:l,max:p,range:[(S=m[0])!=null?S:l,(d=m[1])!=null?d:p],updateRange:h}}function vo(e,t){let{min:r,max:o,range:n,updateRange:a}=jt(e),{filters:i}=Lt(),s=rt(()=>{var l;let p=i.find(f=>{var C;return(C=f==null?void 0:f.filter)==null?void 0:C.range}),h=null;if(p){let f=(l=p.filter.range)==null?void 0:l[0];h=[_(f==null?void 0:f.gte),_(f==null?void 0:f.lte)]}let S=[],d=Math.floor(r/t)*t;for(;d<o;){let f=d+t,C=h&&h[0]===d&&h[1]===f;S.push({min:d,max:f,selected:C}),d=f}return S},[i,r,o,t]),u=l=>{a([l,n[1]])},c=l=>{a([n[0],l])},m=r!==n[0]||o!==n[1];return{min:r,max:o,range:n,updateRange:a,ranges:s,handleMinChange:u,handleMaxChange:c,isSelected:m}}function bo(){let{products:e,keywords:t}=N(r=>r.response);return{products:e!=null?e:{hits:[],total:0},keywords:t!=null?t:{hits:[],total:0}}}function Co(){let e=N(t=>{var r;return(r=t.query.products)==null?void 0:r.filter});return rt(()=>e?e.reduce((t,r)=>t+(Array.isArray(r.value)?r.value.length:1),0):0,[e])}function At(e){return e&&!Number.isNaN(e)?e:0}function wo(e,t){let{from:r,size:o,total:n}=N(u=>{var S,d,f;var c,m,l,p,h;return{from:At((S=(c=u.query.products)==null?void 0:c.from)!=null?S:0),size:At((d=(l=(m=u.response)==null?void 0:m.products)==null?void 0:l.size)!=null?d:0),total:At((f=(h=(p=u.response)==null?void 0:p.products)==null?void 0:h.total)!=null?f:0)}}),{updateSearch:a}=V(),i=r+o,s=[...e].reverse().filter(u=>u+t<n);return{from:r,to:i,total:n,size:o,sizeOptions:s,handleSizeChange:u=>{a({products:{size:_(u)}})}}}function wi(e,t){return e.length!==t.length?!1:e.every(r=>t.find(o=>r.field===o.field&&r.order===o.order))}function xo(e){var a;var t,r;let o=N(i=>i.query),{updateSearch:n}=V();return{activeSort:(a=(t=e.find(i=>{var s;return wi(i.value.sort,((s=o.products)==null?void 0:s.sort)||[])}))==null?void 0:t.id)!=null?a:(r=e[0])==null?void 0:r.id,setSort:i=>{let s=e.find(u=>u.id===i);s&&n({products:{sort:s.value.sort}})}}}var Nt=window.SpeechRecognition||window.webkitSpeechRecognition,Po=!!(Nt&&typeof Nt=="function");function xi(){return{listening:!1,startListening:()=>{},stopListening:()=>{}}}function Pi({language:e="en-US",interimResults:t=!1,onResult:r,onError:o}={}){let[n,a]=go(!1),i=vi(null),s=J(()=>{let c=new Nt;c.lang=e,c.interimResults=t,c.onstart=()=>a(!0),r&&(c.onresult=m=>{var l,p;let{transcript:h}=(p=(l=m.results)==null?void 0:l[0])==null?void 0:p[0];r(h)}),o&&(c.onerror=m=>o(m.error)),c.onend=()=>a(!1),i.current=c,c.start()},[e,t,o,r]),u=J(()=>{var c;(c=i.current)==null||c.stop()},[i]);return{listening:n,startListening:s,stopListening:u}}var ki=Po?Pi:xi;function Ue(){let e={config:pe(),store:je()},{toggleProductFilter:t,replaceFilter:r}=V();return{updateSearch(o,n){return po(e,o,n)},newSearch(o,n){return Z(e,o,n)},toggleProductFilter(o,n,a){return t(o,n,a)},replaceFilter(o,n){return r(o,n)},simulateUpdateSearch(o,n){return fo(e,o,n)}}}import{useEffect as Ti,useState as Ei}from"preact/hooks";function H(e){let t=je(),[r,o]=Ei(e(t.getState()));return t.onChange(e,o),Ti(()=>()=>t.clearOnChange(o),[]),r}function Mi(){return H(e=>e)}function Ii(e){return So(e)}function Fi(){return Lt()}function Oi(e,t){return vo(e,t)}function ot(e){return jt(e)}function Ri(e,t){return yo(e,t)}function Ai(){return Co()}function Ni(e){return xo(e)}function Li(e,t){return wo(e,t)}function ji(){return ho()}function Ui(){return bo()}function Di(){var m,l;let{query:e,response:t}=H(p=>ne(p,"query","response")),{updateSearch:r}=Ue(),o=!0;if(!(t!=null&&t.products))return{hasPrev:!1,hasNext:!1,goToPrev:()=>{},goToNext:()=>{}};let n=(l=(m=e.products)==null?void 0:m.from)!=null?l:0,a=t.products.size,i=n>0,s=o||t.products.hits.length>=a;return{hasPrev:i,hasNext:s,goToPrev:()=>{if(i){let p=Math.max(0,n-a);r({products:{from:p}}),scrollTo(0,0)}},goToNext:()=>{if(s){let p=n+a;r({products:{from:p}}),scrollTo(0,0)}}}}function Ut(e=24){let{from:t,size:r}=N(s=>{var u,c,m,l;return{from:(c=(u=s.query.products)==null?void 0:u.from)!=null?c:0,size:(l=(m=s.query.products)==null?void 0:m.size)!=null?l:0}}),{simulateUpdateSearch:o}=Ue(),{loadMore:n}=ye(e),a=o(et({from:t,size:r,pageSize:e})).url.toString();function i(s){s==null||s.preventDefault(),n()}return{loadMore:i,href:a}}import{useEffect as qi}from"preact/hooks";function zi(e,t={},r=window){let o=H(n=>n.response.products);qi(()=>{let n=new CustomEvent(e,{detail:t});r.dispatchEvent(n)},[o])}import{useCallback as Ki,useMemo as Qi}from"preact/hooks";var $i={defaultCurrency:"EUR",defaultLocale:"en-US",currencySettings:{}},Bi={EUR:"de-DE",GBP:"en-GB",USD:"en-US",AUD:"en-AU",CAD:"en-CA",INR:"en-IN",AFN:"en-IN",BDT:"en-IN",BTN:"en-IN",MMK:"en-IN",NPR:"en-IN",PKR:"en-IN"};function Dt(e={}){let t={...$i,...e};e.currencySettings||z(o=>{var n;t.currencySettings=(n=o.internal.getSettings().currencySettings)!=null?n:{}});function r(o,n){var m;let{defaultCurrency:a,currencySettings:i,defaultLocale:s}=t,u=n!=null?n:a,c=(m=Bi[u])!=null?m:s;if(u in i){let l=i[u],p=new Intl.NumberFormat(c,{useGrouping:!!l.groupingSeparator,minimumFractionDigits:l.decimalPlaces,maximumFractionDigits:l.decimalPlaces}).formatToParts(o).map(h=>h.type==="group"?l.groupingSeparator:h.type==="decimal"?l.decimalCharacter:h.value).join("");return l!=null&&l.currencyBeforeAmount?`${l.currencyToken}${p}`:`${p}${l==null?void 0:l.currencyToken}`}return new Intl.NumberFormat(c,{style:"currency",currency:u}).format(o)}return{formatCurrency:r}}function Hi(e){let{formatCurrency:t}=Dt(e);function r(n,a){let i={};return n.price!==void 0&&(i.priceText=t(n.price,a)),n.listPrice!==void 0&&(i.listPriceText=t(n.listPrice,a)),Object.assign({},n,i)}function o(n){return n.price!==void 0||n.listPrice!==void 0}return function(n){if(!o(n))return n;let a=r(n,n.priceCurrencyCode);return a.skus&&a.skus.some(o)&&(a.skus=a.skus.map(i=>o(i)?r(i,n.priceCurrencyCode):i)),a}}function _i(){let{defaultCurrency:e}=pe(),t=Qi(Dt,[]);return{format:Ki((o,n)=>t.formatCurrency(o,n!=null?n:e),[t,e])}}var Vi={...Ze,pageType:void 0,customParams:{}};function Ce(e){return{...Ye(Vi,e),getInitialState:()=>e}}var Ji=U;import{useCallback as bl}from"preact/hooks";import{useCallback as ll}from"preact/hooks";import{useEffect as Xi}from"preact/hooks";function we(){Xi(()=>{let e=window.setTimeout(()=>{x.error("Nosto client script has not loaded after 3 seconds.")},3e3);z(()=>{window.clearTimeout(e)})},[])}var xe={defaultCurrency:"EUR",queryModifications:e=>e};var Gi={...xe,persistentSearchCache:!1,preservePageScroll:!1};function Yi(e={}){return{pageType:"search",...Gi,...e}}function qt({config:e,store:t,children:r}){let o=t!=null?t:se();return we(),O(ge,{value:Yi(e),children:O(U,{value:o,children:r})})}var Zi={...xe,persistentSearchCache:!1,preservePageScroll:!1};function es(e){return{pageType:"category",...Zi,...e}}function zt({config:e,store:t,children:r}){let o=t!=null?t:se();return we(),O(ge,{value:es(e),children:O(U,{value:o,children:r})})}import{useCallback as Ol}from"preact/hooks";var ts={...xe,memoryCache:!1};function rs(e){return{pageType:"autocomplete",...ts,...e}}function nt({config:e,store:t,children:r}){let o=t!=null?t:se();return we(),O(ge,{value:rs(e),children:O(U,{value:o,children:r})})}import{render as _t,h as $}from"preact";function it(e){if(e)return typeof e=="string"?{selector:e,position:"last"}:{position:"last",...e}}function ko(e,t,r){let o=it(e.dropdownCssSelector),n=o&&document.querySelector(o.selector),a=n?n.querySelector("form"):t.form;return Er(t,r,{form:a})}import{h as Bt}from"preact";import{useContext as cs}from"preact/hooks";var $t="search-templates-ga-event";function os(e){return"gtag"in e&&typeof e.gtag=="function"}function ns(e){return"ga"in e&&typeof e.ga=="function"&&"getAll"in e.ga&&typeof e.ga.getAll=="function"}function is(e){return"google_tag_manager"in e&&typeof e.google_tag_manager=="object"}function Pe(e){var n;let{delay:t=!1,title:r=document.title,location:o=window.location.href}=e||{};if(t)ss(r,o);else{if(os(window)){let a=Object.keys(is(window)?window.google_tag_manager:{}).filter(i=>i.substring(0,2)=="G-");if(a.length>1)for(let i=0;i<a.length;i++)window.gtag("event","page_view",{page_title:r,page_location:o,send_to:a[i]});else window.gtag("event","page_view",{page_title:r,page_location:o})}if(ns(window))try{let a=new URL(o),i=window.ga.getAll();(i==null?void 0:i.length)>0&&((n=i[0])==null||n.send("pageview",a.pathname+a.search))}catch(a){x.warn("Could not send pageview to GA",a)}}}function ss(e,t){localStorage.setItem($t,JSON.stringify({title:e,location:t}))}function as(){let e=localStorage.getItem($t);if(typeof e=="string"){localStorage.removeItem($t);try{let t=JSON.parse(e);Pe(t)}catch(t){x.warn(t)}}}setTimeout(as,1e3);import{createContext as us}from"preact";var ke=us(()=>{});function Ht(e){return Bt(ke.Provider,{value:e.onSubmit},e.children)}function ls(e){var f,C,P,k,M;let{as:t,filter:r,children:o,activeClass:n,url:a,hit:i,onClick:s,...u}=e,c=H(T=>T.query.query),{serpUrlMapping:m,serpPath:l}=pe(),p=cs(ke),h={isKeyword:!0},S=T=>{try{return new URL(`${l||location.pathname}?${wt({[m.query||"query"]:T})}`,window.location.origin).toString()}catch(j){x.warn("Could not create track url",j);return}};function d(){var T,j,v,B,F;if(e.hit){if(L(ee=>ee.recordSearchClick("autocomplete",e.hit)),(T=e.hit)!=null&&T.keyword){if((j=e.hit)!=null&&j._redirect){Pe({delay:!0,location:S(e.hit.keyword)}),location.href=e.hit._redirect;return}return p({query:(v=e.hit)==null?void 0:v.keyword,...e.filter?{products:{filter:[e.filter]}}:{}},h)}Pe({delay:!0,location:S(c)})}(B=e==null?void 0:e.hit)!=null&&B.url||e!=null&&e.url?location.href=e.url||((F=e==null?void 0:e.hit)==null?void 0:F.url):e.query&&p({...e.query,...e.filter?{products:{filter:[e.filter]}}:{}},h)}return t?Bt(t,{...t==="a"&&((f=e.hit)!=null&&f.url)?{href:e.hit.url}:{},...u,onClick:T=>{var j;return e.hit&&L(v=>v.recordSearchClick("autocomplete",e.hit)),(j=e.onClick)==null?void 0:j.call(e,T)}},e.children):Bt("div",{class:`ns-autocomplete-element ${(C=e.class)!=null?C:""}`,"data-nosto-query":((P=e==null?void 0:e.hit)==null?void 0:P.keyword)||((k=e==null?void 0:e.query)==null?void 0:k.query),"data-nosto-url":e.url||((M=e==null?void 0:e.hit)==null?void 0:M.url),onClick:()=>{d()},onKeyDown:T=>{T.key==="Enter"&&d()},tabIndex:0},e.children)}import{Fragment as ms,h as Kt}from"preact";import{useContext as ps}from"preact/hooks";function Qt(e){return Kt(ke.Provider,{value:e.onHistorySubmit},e.children)}function ds({children:e,query:t,class:r}){let o=ps(ke);return Kt(ms,null,Kt("div",{className:`ns-autocomplete-element ${r||""}`,"data-nosto-query":t==null?void 0:t.query,onClick:()=>{t&&o(t)},onKeyDown:n=>{n.key==="Enter"&&t&&o(t)},tabIndex:0},e))}import{Fragment as fs,h as gs}from"preact";import{useErrorBoundary as ys}from"preact/hooks";function ae({children:e}){let[t]=ys();return t&&x.error("Error caught in ErrorBoundary",t),gs(fs,null,e)}function To(e){let t;return r=>{t&&clearTimeout(t),t=setTimeout(r,e)}}function st({initialized:e,loading:t}){return{initialized:G()?e&&!t:e}}async function Jt(e,t){if(!e.inputCssSelector||ie())return;let r=A("initAutocomplete");e.formCssSelector&&await ro(e.formCssSelector,e.formUnbindDelay);let o=Ce({pageType:"autocomplete",query:Me(e,"autocompleteQuery")}),n=To(e.debounceDelay),a=fe(e.inputCssSelector,HTMLInputElement).filter(i=>{var s;return!((s=i.form)!=null&&s.classList.contains(Ge))}).map(i=>{let s=hs(i,e),u=Ss(i,e);if(e.speechToTextComponent&&e.speechToTextEnabled){let d=document.createElement("div");d.className="ns-autocomplete-voice-position",i.insertAdjacentElement("afterend",d),_t($(ae,null,$(e.speechToTextComponent,{onSubmit:f=>t.onSubmit({query:f})})),d)}let c=()=>{o.updateState({historyItems:u.get()})};i.setAttribute("data-nosto-element","search-input"),c();let m=d=>(f,C)=>{t.onSubmit(f,C),d.hide(),f.query&&(u.add(f.query),c(),i.value=f.query)},l=async d=>{var C,P;s.hide(),((P=(C=o.getState())==null?void 0:C.query)==null?void 0:P.query)!==d&&await Z({config:e,store:o},{query:d}),s.show()};Tr(i);let p=ko(e,i,{onInput:d=>{d.length>=e.autocompleteMinLength?(s.show(),u.hide(),n(async()=>{try{return await Z({config:e,store:o},{query:d})}catch(f){x.error("New search failed",f);return}})):d.length===0&&e.historyEnabled?(s.hide(),u.show()):(s.hide(),u.hide())},onFocus:async d=>{if(d.length>=e.autocompleteMinLength)d||o.updateState({initialized:!0,loading:!1});else if(d.length===0&&e.historyEnabled&&!u.isOpen()){if(!e.historyComponent)return;u.show(),_t($(ae,null,$(nt,{config:e,store:o},$(re.Provider,{value:e},$(Qt,{onHistorySubmit:m(u)},$(e.historyComponent,null))))),u.element)}},onClick:async d=>{if(d.length>=e.autocompleteMinLength)l(d),d||o.updateState({initialized:!0,loading:!1});else if(d.length===0&&e.historyEnabled&&!u.isOpen()){if(!e.historyComponent||!e.historyEnabled)return;u.show()}},onSubmit:d=>{if(d.length>=e.autocompleteMinLength){s.hide(),u.hide(),u.add(d),c();let f=s.highlightedIndex();if(f>=0){s.submitHighlightedItem(f);return}t.onSubmit({query:d}),s.hide()}},onKeyDown:(d,f)=>{if(d.length>=e.autocompleteMinLength){if(s.isOpen()){if(f==="ArrowDown")s.goDown();else if(f==="ArrowUp")s.goUp();else if(f==="Enter"){let C=s.highlightedIndex();if(C>=0){s.submitHighlightedItem(C);return}s.hide()}}f==="Escape"?s.hide():f==="ArrowDown"&&(s.show(),u.hide())}if(d.length===0&&e.historyEnabled){if(u.isOpen()&&(f==="ArrowDown"?u.goDown():f==="ArrowUp"&&u.goUp()),f==="Escape")u.hide();else if(f==="ArrowDown")u.show();else if(f==="Enter"){let C=u.highlightedIndex();if(C>=0){u.submitHighlightedItem(C);return}u.hide()}}}});o.onChange(st,({initialized:d})=>{if(!d||!e.autocompleteComponent)return;let f=A("renderAutocomplete");_t($(ae,null,$(nt,{config:e,store:o},$(re.Provider,{value:e},$(Ht,{onSubmit:m(s)},$(e.autocompleteComponent,null))))),s.element),f()});let h=kt([s.element,i],()=>{s.hide()}),S=kt([u.element,i],()=>{u.hide()});return{destroy(){p.destroy(),s.destroy(),u.destroy(),h.destroy(),S.destroy()}}});return r(),{destroy:()=>{a.forEach(i=>{i.destroy()})}}}function Eo(e,t,r){var u;let o=document.createElement("div");o.className="nosto-autocomplete-wrapper",t.style.display="none",(u=e.parentNode)==null||u.insertBefore(o,e.nextSibling),o.appendChild(e);let n=it(r.dropdownCssSelector),a=n&&document.querySelector(n.selector);if(a){let c=document.createElement("form");c.className="nosto-dropdown-form",c.appendChild(t),n.position==="first"?a.prepend(c):a.appendChild(c)}else o.appendChild(t);let i=(c,m)=>{var l,p;(l=t.querySelector(".ns-autocomplete-element.ns-autocomplete-element-hovered"))==null||l.classList.remove("ns-autocomplete-element-hovered"),(p=c[m])==null||p.classList.add("ns-autocomplete-element-hovered")},s=c=>{let m=Array.from(t.getElementsByClassName("ns-autocomplete-element")),l=m.find(p=>p.classList.contains("ns-autocomplete-element-hovered")?(c&&p.classList.remove("ns-autocomplete-element-hovered"),!0):!1);return l?m.indexOf(l):-1};return{element:t,hide:()=>{t.style.display="none"},show:()=>{t.style.display=""},destroy:()=>{var c;(c=o.parentElement)==null||c.removeChild(o)},isOpen:()=>t.style.display!=="none",goDown:()=>{let c=Array.from(t.getElementsByClassName("ns-autocomplete-element")),m=s(!0);i(c,m>=0?m+1:0)},goUp:()=>{let c=Array.from(t.getElementsByClassName("ns-autocomplete-element")),m=s(!0);i(c,(m>=0?m:c.length)-1)},highlight:i,highlightedIndex:s,submitHighlightedItem:c=>{var p,h;let m=Array.from(t.querySelectorAll(".ns-autocomplete-element"));(p=m[c])==null||p.click();let l=(h=m[c])==null?void 0:h.getAttribute("data-nosto-query");l&&(e.value=l)}}}function hs(e,t){let r=document.createElement("div");return{...Eo(e,r,t),element:r}}var Vt="nosto:search-templates:history";function Ss(e,t){let r=document.createElement("div");return{...Eo(e,r,t),element:r,add:n=>{let i=(xt(Vt)||[]).filter(s=>s!==n).slice(t.historySize?-t.historySize:0);i.push(n),Br(Vt,i)},get:()=>{let n=xt(Vt)||[];return n?n.reverse().filter(i=>!!i):void 0}}}function Xt({products:e,...t}){return{...t,products:{...e,...e!=null&&e.from?{from:_(e.from)}:{},...e!=null&&e.size?{size:_(e.size)}:{}}}}import{render as Mo,h as ue}from"preact";async function vs({selector:e,timeout:t=500}){return(await Wt({selector:e,timeout:t}))[0]}function Wt({selector:e,timeout:t=500}){return new Promise((r,o)=>{let n=fe(e);if(n.length>0)return r(n);let a=new MutationObserver(()=>{let s=fe(e);s.length>0&&(a.disconnect(),clearTimeout(i),r(s))}),i=setTimeout(()=>{a.disconnect(),x.warn(`Timed out (${t}) while waiting for element ${e}`),r([])},t);a.observe(document.body,{childList:!0,subtree:!0})})}async function Gt(e,t,{cssSelector:r,docComponent:o}){if(!r||!o)return;let n=await Wt({selector:r,timeout:100}),a=n[0];if(!a){x.warn(`No content element with ${r} selector found, skipping rendering`);return}n.length>1&&x.warn(`Multiple content elements found with ${r} selector, using the first element for rendering`),e.serpRenderDelay&&await e.serpRenderDelay(),to(a);let i=A("renderSearch"),s=t.getState().pageType,u={store:t,config:e,target:a,ComponentToRender:o};if(s==="search")bs(u);else if(s==="category")Cs(u);else throw new Error(`Unsupported page type: ${s}`);i()}function bs({store:e,config:t,target:r,ComponentToRender:o}){Mo(ue(ae,null,ue(qt,{store:e,config:t},ue(re.Provider,{value:t},ue(o,null)))),r)}function Cs({store:e,config:t,target:r,ComponentToRender:o}){Mo(ue(ae,null,ue(zt,{store:e,config:t},ue(re.Provider,{value:t},ue(o,null)))),r)}async function Yt(e,t){let r=A("initSerp");Tt(e.contentCssSelector),Tt(e.categoryCssSelector),t.onChange(st,({initialized:o})=>{o&&(t.getState().pageType==="category"?Gt(e,t,{cssSelector:e.categoryCssSelector,docComponent:e.categoryComponent}):Gt(e,t,{cssSelector:e.contentCssSelector,docComponent:e.serpComponent}),e.preservePageScroll&&Yr())}),t.onChange(({query:o,customParams:n})=>({query:o,customParams:n}),({query:o,customParams:n})=>{Lr(ve({config:e,store:t},o,{customParams:n})),Pe()}),Io(e,t),jr(()=>{Io(e,t)}),r()}function ws(e,t){var l,p,h,S;let r=Nr(Ar(location.search)),o=Object.values(e.serpUrlMapping),n=Rr(r,e.serpUrlMapping)||{};n.products&&!n.products.size&&(n.products.size=(p=(l=t.getInitialState().query)==null?void 0:l.products)==null?void 0:p.size);let a=Object.entries(r).reduce((d,f)=>(o.includes(f[0])||(d[f[0]]=f[1]),d),{}),i=Xe(e),s=Fe(...(S=(h=e.customUrlMappings)==null?void 0:h.map(d=>f=>d.decode(f,i)))!=null?S:[]),u=Fe(s,Xt)(n),c=q(t.getInitialState().query,u),m=s(a);return{query:c,customParams:m}}function Io(e,t){var i;let{query:r,customParams:o}=ws(e,t),n=(!e.serpPath||location.pathname===e.serpPath)&&!!(r!=null&&r.query),a=(i=e.isCategoryPage)==null?void 0:i.call(e);if(n&&t.getState().pageType==="search"||a&&t.getState().pageType==="category"){if(e.fallback&&ie()){tt(e,r);return}Z({config:e,store:t},r,{customParams:o});return}t.getState().initialized&&location.reload()}function Zt(e){return Object.entries(e).reduce((t,[r,o])=>{let n=r.split("."),a=t;for(let s=0;s<n.length-1;s++){let u=n[s];a[u]||(a[u]={}),a=a[u]}let i=n[n.length-1];return a[i]=o,t},{})}function at(e,t=""){let r={};return Object.entries(e).forEach(([o,n])=>{let a=t?`${t}.${o}`:o;typeof n=="object"&&n!==null?Object.assign(r,at(n,a)):r[a]=n}),r}function he({encode:e,decode:t}){return{encode(r,o){return r.products?{...r,products:e(r.products,o)}:r},decode(r,o){return r.products?{...r,products:t(r.products,o)}:r}}}function ut(e,t){return e.replace(/%7E/g,t)}function er(e,t){let r=new RegExp(`\\${t}`,"g");return e.replace(r,"%7E")}function xs(e,t){let[r,o]=e.split(t),n={};return o&&(n[o.includes("]")?"lt":"lte"]=ut(o.replace(/[[{\]}']/gm,""),t)),r&&(n[r.includes("[")?"gt":"gte"]=ut(r.replace(/[[{\]}']/gm,""),t)),n}var Fo={decode(e){return e.split("||").map(t=>ut(t,"~"))},encode(e){return e.map(t=>er(t,"~")).join("||")}},tr={decode(e,t){return e.split(",").map(r=>xs(r,t))},encode(e,t){return e.map(r=>{let o=r.gte||(r.gt?`[${r.gt}`:""),n=r.lte||(r.lt?`${r.lt}]`:"");return[o,n].map(a=>er(a,t.filterRangeSeparator)).join(t.filterRangeSeparator)}).join(",")}},rr={decode(e,t,r){if(t.includes("-+")){let o=decodeURIComponent(t);return{field:e,range:tr.decode(o,"-+")}}else if(t.includes(r.filterRangeSeparator))return{field:e,range:tr.decode(t,r.filterRangeSeparator)};return{field:e,value:Fo.decode(t)}},encode({field:e,range:t,value:r},o){return t?{[e]:tr.encode(t,o)}:r?{[e]:Fo.encode(r)}:{}}};var ct=he({encode({filter:e,...t},r){if(!e)return t;let o=e.reduce((a,i)=>({...a,...rr.encode(i,r)}),{}),n=Zt(o);return{...t,filter:n}},decode({filter:e,...t},r){if(!e)return t;let o=at(e),n=Object.entries(o).map(([a,i])=>rr.decode(a,i,r));return{...t,filter:n}}});var lt=he({encode({sort:e,...t}){if(!e)return t;let r=e.map(({field:o,order:n})=>`${o}~${n}`).join(",");return{...t,sort:r}},decode({sort:e,...t}){if(!e)return t;if(typeof e=="object"){let o=Object.entries(e).map(([n,a])=>({field:n,order:a}));return{...t,sort:o}}let r=e.split(",").filter(Boolean).map(o=>o.split("~")).map(([o,n])=>({field:o,order:n}));return{...t,sort:r}}});var mt=he({encode({from:e=0,size:t,...r}){if(!t)return r;let o=Math.floor(e/t)+1;return{...r,page:o,size:t}},decode({page:e=1,size:t,...r}){if(!t)return r;let o=(e-1)*t;return{...r,from:o,size:t}}});function Ps(e,t){let r=mt.encode(e,t),o=lt.encode(r,t);return ct.encode(o,t)}function ks(e,t){let r=mt.decode(e,t),o=lt.decode(r,t);return ct.decode(o,t)}var Oo={encode:Ps,decode:ks};function Ro(e){let t=q(St,e);return t.compressUrlParameters&&!t.customUrlMappings&&(t.customUrlMappings=[Oo]),t.onBeforeSearch=(r,o)=>{var i;if(e.fallback&&ie())throw new Error("Search API is in error state");let n=r.store,a=o;n.updateState({customParams:(i=a.customParams)!=null?i:{}})},t.onSearchError=(r,o,n,a)=>{e.fallback&&a!=="autocomplete"&&(mo(r)?tt(t,o):x.info("Skipping fallback logic for ",r))},t.search={hitDecorators:t.hitDecorators,maxRetries:t.retries,retryInterval:t.retryInterval},t}async function Ts(e){let t=A("init"),r=Ro(e),o=await new Promise(L),{searchEnabled:n,categoriesEnabled:a}=o.internal.getSettings(),i=n&&r.contentCssSelector,s=n&&r.inputCssSelector,u=a&&r.categoryCssSelector;if(i||s){vr(r);let c=Ce({query:Me(r,"serpQuery"),pageType:"search"});i&&Yt(r,c),s&&Jt(r,{onSubmit:(m,l)=>{m.query&&L(p=>p.recordSearchSubmit(m.query)),r.serpPathRedirect||r.fallback&&ie()?typeof r.serpPathRedirect=="function"?r.serpPathRedirect(m,l):location.href=de(ve({config:r,store:c},m)):Z({config:r,store:c},m,l)}})}if(u&&(await Xr(),r.isCategoryPage())){let c=Ce({query:Me(r,"categoryQuery"),pageType:"category"});Yt(r,c)}t()}import{h as pt}from"preact";function De({category:e,children:t}){return pt("span",{class:"ns-clickable"},e!=null&&e.value?pt("span",null,t," ",pt("span",{class:"ns-keyword-in-category"},"in ",pt("span",null,e.value))):t)}import{Fragment as Is,h as K}from"preact";import{h as ze,Fragment as Ms}from"preact";import{Fragment as Es,h as Ao}from"preact";function qe({children:e,filter:t,wrapperComponent:r}){return r?Ao(r,{keywordComponent:e,filter:t}):Ao(Es,null,e)}function or({categoryField:e,wrapperComponent:t,hit:r,keywordComponent:o,keywordInCategoryComponent:n=De,categorySuggestionCount:a=3}){var s,u;let i=(s=r.facets)==null?void 0:s.find(c=>"data"in c&&c.field===e);return(u=i==null?void 0:i.data)!=null&&u.length?ze(Ms,null,ze(qe,{wrapperComponent:t},o),i.data.slice(0,a).map((c,m)=>{var l;return ze(qe,{wrapperComponent:t,key:(l=c.value)!=null?l:m,filter:{value:[c.value],field:e}},ze(n,{category:c},o))})):ze(qe,{wrapperComponent:t},o)}function Fs({hits:e,elementComponent:t,keywordComponent:r,keywordInCategoryComponent:o=De,categorySuggestion:n=!0,categorySuggestionCount:a=3}){var c,m,l;let[i,...s]=e!=null?e:[],u=(l=(m=(c=e==null?void 0:e.find(p=>{var h;return(h=p==null?void 0:p.facets)==null?void 0:h.find(S=>{var d;return"data"in S&&((d=S==null?void 0:S.data)==null?void 0:d.length)>0})}))==null?void 0:c.facets)==null?void 0:m.find(p=>{var h;return"data"in p&&((h=p==null?void 0:p.data)==null?void 0:h.length)>0}))==null?void 0:l.field;return u&&i&&n?K(Is,null,K(or,{hit:i,categoryField:u,keywordComponent:K(r,{hit:i}),wrapperComponent:({keywordComponent:p,filter:h})=>t?K(t,{keywordComponent:p,hit:i,filter:h}):K(r,{hit:i}),keywordInCategoryComponent:o,categorySuggestionCount:a}),s==null?void 0:s.map((p,h)=>t?K(t,{key:`${p.keyword}-${h}}`,keywordComponent:K(r,{hit:p}),hit:p}):K(r,{hit:p}))):e==null?void 0:e.map((p,h)=>t?K(t,{key:`${p.keyword}-${h}}`,keywordComponent:K(r,{hit:p}),hit:p}):K(r,{hit:p}))}import{h as dt}from"preact";import{useEffect as qo,useRef as zo}from"preact/hooks";var Os=e=>e;function ce(e,t=Os){return Object.keys(e).filter(r=>e[r]).map(t).join(" ")}function X(...e){}function No(e,{min:t,max:r}){return e<=t?t:e>=r?r:e}function Lo(e,{min:t,max:r}){return e<t||e>r}function Rs(e){let t=e.toString(),r=t.indexOf("."),o=0;return r!==-1&&(o=t.length-r-1),o}function As(e,{marks:t,step:r,min:o}){let n=Object.keys(t).map(Number);if(r!=null&&r>0){let i=Math.round((e-o)/r)*r+o;n.push(i)}let a=n.map(i=>Math.abs(e-i));return n[a.indexOf(Math.min(...a))]||o}function jo(e,{step:t,marks:r,min:o}){let n=As(e,{step:t,marks:r,min:o});return t==null||t<=0?n:Number(n.toFixed(Rs(t)))}function nr(e,t){let r=t.getBoundingClientRect();return e?r.top+r.height/2:r.left+r.width/2}function ir(e,t){return e?t.clientY:t.pageX}function sr(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function ar(e,t){return t.some(r=>e.target===r)}function ur(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}import{h as Uo}from"preact";function cr({min:e,max:t,lowerBound:r,upperBound:o,marks:n,included:a,vertical:i,classesPrefix:s}){let u=Object.keys(n),l=100/(u.length-1)*.9,p=t-e,h=u.map(Number).sort((S,d)=>S-d).map(S=>{let d=!a&&S===o||a&&S<=o&&S>=r,f=ce({active:d,text:!0},k=>`${s}${k}`),C=i?{marginBottom:"-50%",bottom:`${(S-e)/p*100}%`}:{width:`${l}%`,marginLeft:`${-l/2}%`,left:`${(S-e)/p*100}%`},P=n[S];return Uo("span",{class:f,style:C,key:String(S)},P)});return Uo("div",{class:`${s}marks`},h)}import{h as Do}from"preact";function lr({min:e,max:t,step:r,lowerBound:o,upperBound:n,marks:a,dots:i,included:s,vertical:u,classesPrefix:c}){let m=t-e,l=Ns(a,i,r,e,t).map(p=>{let h=`${Math.abs(p-e)/m*100}%`,S=u?{bottom:h}:{left:h},d=!s&&p===n||s&&p<=n&&p>=o,f=ce({active:d,dot:!0},C=>`${c}${C}`);return Do("span",{class:f,style:S,key:String(p)})});return Do("div",{class:`${c}steps`},l)}function Ns(e,t,r,o,n){let a=Object.keys(e).map(Number);if(t&&r>0)for(let i=o;i<=n;i=i+r)a.indexOf(i)===-1&&a.push(i);return a}var Ls={LEFT:0,MODDLE:1,RIGHT:2,BACK:3,FORWARD:4};function mr({min:e=0,max:t=100,step:r=1,marks:o={},dots:n=!1,included:a=!0,vertical:i=!1,disabled:s=!1,className:u="range-slider",classesPrefix:c="",children:m,tracks:l=[],handles:p=[],bounds:h=[],lowerBound:S=0,upperBound:d=0,sliderRefCallback:f,activeHandle:C=null,handlesRefs:P=[],onStart:k=X,onEnd:M=X,onMove:T=X,onAfterChange:j=X}){let v=zo(0),B=zo(null);qo(()=>{f&&f(B.current)},[]),qo(()=>{if(He(),C!==null)return Ee(),Se(),()=>{He()}});let F=ce({"with-marks":!!Object.keys(o).length,vertical:i,disabled:s,[u]:!0},E=>c+E);function ee(E){if(E.button!==Ls.LEFT)return;let D=ir(i,E);if(ar(E,P)&&E.target instanceof Element){let le=nr(i,E.target);v.current=D-le,D=le}else v.current=0;k(D)}function $e(E){if(ur(E))return;let D=sr(i,E);if(ar(E,P)&&E.target instanceof Element){let le=nr(i,E.target);v.current=D-le,D=le}else v.current=0;k(D)}function Te(E){if(!B.current){M();return}let D=ir(i,E);T(D-v.current)}function Be(E){if(!B.current||ur(E)){M();return}let D=sr(i,E);T(D-v.current)}function te(){M(),j(h)}function Ee(){document.addEventListener("mousemove",Te),document.addEventListener("mouseup",te)}function Se(){document.addEventListener("touchmove",Be),document.addEventListener("touchend",te)}function He(){document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",te),document.removeEventListener("touchmove",Be),document.removeEventListener("touchend",te)}return dt("div",{class:F,ref:B,onTouchStart:s?X:$e,onMouseDown:s?X:ee},dt("div",{class:`${c}rail`}),l,dt(lr,{vertical:i,marks:o,dots:n,step:r,included:a,lowerBound:S,upperBound:d,max:t,min:e,classesPrefix:c}),p,dt(cr,{vertical:i,marks:o,included:a,lowerBound:S,upperBound:d,max:t,min:e,classesPrefix:c}),m)}import{h as $o}from"preact";import{useEffect as js,useRef as Us}from"preact/hooks";function pr({min:e,max:t,value:r,vertical:o,disabled:n,dragging:a,index:i,offset:s,classesPrefix:u,label:c,children:m,refFn:l}){let p=Us(null);js(()=>{a&&p.current&&p.current.focus()},[a]);let h=o?{bottom:`${s}%`}:{left:`${s}%`},S=ce({dragging:a,handle:!0,[`handle-${i}`]:!0},f=>`${u}${f}`);function d(f){l(f),f&&(p.current=f)}return $o("div",{class:S,style:h,role:"slider",tabIndex:-1,"aria-orientation":o?"vertical":"horizontal","aria-disabled":!0,"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":r,"aria-label":c,ref:d},$o("span",{class:`${u}tip`},m))}import{h as fr}from"preact";import{h as Ds}from"preact";function dr({vertical:e,included:t,index:r,offset:o,length:n,classesPrefix:a}){let i={};return t||(i.visibility="hidden"),e?(i.bottom=`${o}%`,i.height=`${n}%`):(i.left=`${o}%`,i.width=`${n}%`),Ds("div",{class:`${a}track ${a}track-${r}`,style:i})}import{useCallback as qs,useEffect as Bo,useRef as ft,useState as gt}from"preact/hooks";function gr(e){let{count:t=1,allowCross:r=!0,pushable:o=!1,value:n=null,defaultValue:a=null,min:i=0,max:s=100,classesPrefix:u="",tipFormatter:c=String,step:m=1,marks:l={},dots:p=!1,included:h=!0,vertical:S=!1,disabled:d=!1,className:f="range-slider",onBeforeChange:C=X,onAfterChange:P=X,onChange:k,children:M}=e,[T,j]=gt(void 0),[v,B]=gt([]),[F,ee]=gt(null),[$e,Te]=gt(0),Be=qs(y=>{te.current=y},[]),te=ft(null),Ee=ft([]);Bo(()=>{let y=[...Array(t+1)].map(()=>i),g=n!=null?n:a!=null?a:y;B(g.map(b=>yt(b))),Te(v[0]===s?0:v.length-1)},[]);let Se=ft(v),He=ft(e);Bo(()=>{if(!(n||typeof i=="number"||typeof s=="number"))return;let g=(n||Se.current).map(b=>yt(b,He.current));g.length===Se.current.length&&g.every((b,w)=>b===Se.current[w])||(B(g),Se.current.some(b=>Lo(b,{min:i,max:s}))&&k(g))},[n,i,s]);let E=v.map(y=>rn(y)),D=v.map((y,g)=>fr(pr,{vertical:S,disabled:d,dragging:F===g,min:i,max:s,value:y,index:g+1,offset:E[g],classesPrefix:u,refFn:b=>{Yo(b,g)},key:`handle-${g}`,label:g?"Upper bound":"Lower bound"},c(y))),le=v.slice(0,-1).map((y,g)=>{let b=g+1;return fr(dr,{vertical:S,included:!0,index:b,offset:E[g],length:E[b]-E[g],classesPrefix:u,key:`track-${g}`})});function Yo(y,g=0){y?y instanceof HTMLElement&&(Ee.current[g]=y):delete Ee.current[g]}function Zo(){let y=te.current;if(!y)return 0;let g=y.getBoundingClientRect();return S?g.top:g.left}function yr(y){let g=y-Zo();return yt(en(g))}function en(y){let g=Math.abs(Math.max(y,0)/tn());return S?(1-g)*(s-i)+i:g*(s-i)+i}function tn(){let y=te.current;return y?S?y.clientHeight:y.clientWidth:0}function rn(y){return(y-i)/(s-i)*100}function hr(y){!n?(B(y.bounds),y.handle&&ee(y.handle)):typeof y.handle!="undefined"&&ee(y.handle),k(y.bounds)}function on(y){C==null||C(v);let g=yr(y),b=an(g),w=un(g,b);ee(w),Te(w);let R=v[w];if(g===R)return;let I=[...v];I[w]=g,hr({bounds:I})}function nn(y){if(F==null)return;let g=yr(y),b=v[F];if(g===b)return;let w=[...v];w[F]=g;let R=F;if(o!==!1){let I=v[R];cn(w,R,I)}else r&&(w.sort((I,me)=>I-me),R=w.indexOf(g));hr({handle:R,bounds:w})}function sn(){ee(null)}function yt(y,g={}){let b={min:i,max:s,allowCross:r,marks:l,step:m,...g};return jo(pn(No(y,b),b),b)}function an(y){let g=0;for(let b=1,w=v.length-1;b<w;b++)y>v[b]&&(g=b);return Math.abs(v[g+1]-y)<Math.abs(v[g]-y)&&(g+=1),g}function un(y,g){let b=g,w=g+1;return v[w]===v[g]&&(v[$e]===v[g]?b=$e:b=w,y!==v[w]&&(b=y<v[w]?g:w)),b}function cn(y,g,b){let w=Number(o),R=y[g],I=0;if(y[g+1]-R<w&&(I=1),R-y[g-1]<w&&(I=-1),I===0)return;let me=g+I,Ke=I*(y[me]-R);Sr(y,me,I,w-Ke)||(y[g]=b)}function Sr(y,g,b,w){let R=y[g],I=y[g];for(;b*(I-R)<w;){if(!ln(y,g,b))return y[g]=R,!1;I=y[g]}return!0}function ln(y,g,b){let w=mn(),I=w.indexOf(y[g])+b;if(I>=w.length||I<0)return!1;let me=g+b,Ke=w[I],dn=Number(o),fn=b*(y[me]-Ke);return Sr(y,me,b,dn-fn)?(y[g]=Ke,!0):!1}function mn(){let y=T;if(!y||y.marks!==l||y.step!==m){let g={...l};if(m!=null&&m>0)for(let w=i;w<=s;w+=m)g[w]=String(w);let b=Object.keys(g).map(Number);b.sort((w,R)=>w-R),j({marks:l,step:m,points:b})}return(T==null?void 0:T.points)||[]}function pn(y,{allowCross:g}){if(!g&&F!=null){if(F>0&&y<=v[F-1])return v[F-1];if(F<v.length-1&&y>=v[F+1])return v[F+1]}return y}return fr(mr,{min:i,max:s,vertical:S,disabled:d,classesPrefix:u,tracks:le,handles:D,bounds:v,upperBound:v[v.length-1],lowerBound:v[0],handlesRefs:Ee.current,activeHandle:F,step:m,marks:l,dots:p,included:h,className:f,onBeforeChange:C,onAfterChange:P,onChange:k,onStart:on,onEnd:sn,onMove:nn,sliderRefCallback:Be,tipFormatter:c},M)}import{h as Ho,Fragment as zs}from"preact";function $s(e){let{min:t,max:r,range:o,updateRange:n}=ot(e.id);return typeof t=="number"&&typeof r=="number"&&t!==r?Ho(gr,{key:`range_slider_${t}_${r}_${o.join("_")}`,classesPrefix:e.classesPrefix||"ns-",className:e.className||"range-slider",onChange:([a,i])=>{e.onSlide&&e.onSlide([Math.floor(a||t),Math.ceil(i||r)])},onAfterChange:([a,i])=>{n([a,i])},defaultValue:[Math.floor(o[0]||t),Math.ceil(o[1]||r)],min:Math.floor(t),max:Math.ceil(r),tipFormatter:e.valueFormat}):Ho(zs,null)}import{h as Ko}from"preact";var Bs=!G()&&Ne()?Le:Qo;function Qo({loadMoreComponent:e,...t}){return Ko(Rt,{...t,loadMoreComponent:e||Hs})}function Hs({pageSize:e}){let{loadMore:t,href:r}=Ut(e);return Ko("a",{class:"ns-load-more-button ns-act-btn ns-act-btn-light ns-text-align-center",onClick:t,href:r},"More results")}import{h as _o,Fragment as Ks,cloneElement as Qs}from"preact";function _s({children:e,hit:t,as:r,onClick:o,...n}){let a=H(u=>u.pageType),i=a==="category"?"category":a==="search"?"serp":void 0,s=e instanceof Array?e:[e];return r?_o(r,{...r==="a"&&t&&typeof t=="object"&&"url"in t&&typeof t.url=="string"?{href:t.url}:{},...n,onClick:u=>(t&&i&&L(c=>c.recordSearchClick(i,t)),Et(),o==null?void 0:o(u))},...s):_o(Ks,null,s.map((u,c)=>{if(u&&typeof u=="object"&&"props"in u){let m=l=>{var p;t&&i&&L(h=>h.recordSearchClick(i,t)),Et(),typeof((p=u.props)==null?void 0:p.onClick)=="function"&&u.props.onClick(l)};return Qs(u,{...u.props,onClick:m,key:c})}return u}))}function Vs(e,t){L(r=>r.recordSearchClick(e,t))}function Js(e,t,...r){return{id:e,value:{name:t,sort:r}}}var Xs={locale:"en-US",fractionDigits:2},Vo={EUR:{locale:"de-DE",fractionDigits:2},GBP:{locale:"en-GB",fractionDigits:2},USD:{locale:"en-US",fractionDigits:2},AUD:{locale:"en-AU",fractionDigits:2},CAD:{locale:"en-CA",fractionDigits:2}};function $f(e,t){Vo[e]=t}function Bf(e,t="EUR"){var a;let{locale:r,fractionDigits:o}=(a=Vo[t])!=null?a:Xs;return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:o,maximumFractionDigits:o}).format(e)}function Jo(e,t){return e.reduce((r,o,n)=>{let a=t(o,n),i=r[a]||[];return i.push(o),r[a]=i,r},{})}function Xo({size:e,productId:t,hash:r}){let o=wr();if(!o)throw new Error("Client script settings are not yet available");return`https://${o.thumbnailHost}/${o.account}/${e}/${t}/${r}/A`}function Ws({size:e}){function t(n,a){if(a)return Xo({size:e,productId:n,hash:a})}function r(n,a){if(a)return a.map(i=>{var s;return{...i,imageUrl:(s=t(n,i.imageHash))!=null?s:i.imageUrl}})}function o(n,a,i){if(!i)return a;if(a)return i.map(s=>Xo({size:e,productId:n,hash:s}))}return function(n){var i,s;let a=n.productId;return a?{...n,imageUrl:(i=t(a,n.imageHash))!=null?i:n.imageUrl,thumbUrl:(s=t(a,n.thumbHash))!=null?s:n.thumbUrl,skus:r(a,n.skus),alternateImageUrls:o(a,n.alternateImageUrls,n.alternateImageHashes)}:n}}var Gs=/cdn\.shopify\.com/,Wo={1:"170x170",2:"100x100",3:"90x70",4:"50x50",5:"30x30",6:"100x140",7:"200x200",8:"400x400",9:"750x750"};function Ys(e){return e in Wo}function Go({size:e,fallback:t=r=>r}){if(e==="orig")return t;let r=Wo[e]||e;function o(s){return s?new URL(s).hostname.match(Gs):!1}function n(s){return s?o(s)?s.replace(/(\.jpg|\.png|\.jpeg|\.gif|\.webp)/,`_${r}$1`):s:""}function a(s){if(s)return s.map(u=>({...u,imageUrl:n(u.imageUrl)}))}function i(s){if(s)return s.map(u=>n(u))}return function(s){return o(s.imageUrl)?{...s,imageUrl:n(s.imageUrl),thumbUrl:n(s.thumbUrl),skus:a(s.skus),alternateImageUrls:i(s.alternateImageUrls)}:t(s)}}function Zs(){var e;return(e=window.Nosto)==null?void 0:e.shopifyScript}function ea({size:e}){let t=Ws({size:e});return Zs()&&Ys(e)?Go({size:e,fallback:t}):t}export{mr as AbstractSlider,ls as AutocompleteElement,Ht as AutocompleteElementProvider,nt as AutocompletePageProvider,zt as CategoryPageProvider,pr as Handle,ds as HistoryElement,Qt as HistoryElementProvider,Bs as InfiniteScroll,Qo as InfiniteScrollWithLink,De as KeywordInCategory,qe as KeywordWrapper,Fs as Keywords,or as KeywordsInCategory,cr as Marks,gr as MultiSlider,$s as RangeSlider,qt as SearchPageProvider,_s as SerpElement,lr as Steps,Ji as StoreContext,dr as Track,ct as compressFilterParameters,lt as compressSortParameters,$f as configureCurrency,Js as createSortOption,Ce as createStore,Vo as currencyOptions,Bf as formatCurrency,Jo as groupBy,Ts as init,Jt as initAutocomplete,mt as mapOffsetToPage,ne as pick,Hi as priceDecorator,Vs as reportClick,Go as shopifyThumbnailDecorator,Po as speechToTextSupported,ea as thumbnailDecorator,Ue as useActions,Mi as useAppState,H as useAppStateSelector,pe as useConfig,_i as useCurrencyFormatting,zi as useDispatchEventOnLoad,Ri as useFacet,ji as useFacets,Ut as useLoadMore,Ii as usePagination,Fi as useProductFilters,ot as useRange,Oi as useRangeSelector,ot as useRangeSlider,Ui as useResponse,Ai as useSelectedFiltersCount,Di as useSimplePagination,Li as useSizeOptions,Ni as useSort,ki as useSpeechToText,je as useStore,vs as waitForElement};
//# sourceMappingURL=nosto.module.js.map
